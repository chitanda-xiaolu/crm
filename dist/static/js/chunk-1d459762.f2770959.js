(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d459762"],{"0669":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"notice-container"},[a("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"110px"}},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("所属信息"),a("i",{staticClass:"el-icon-thumb thumb"})]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticClass:"content-top-item",attrs:{label:"选择经销商：",prop:"distributorId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"","loading-text":"搜索中...",placeholder:"请选择"},on:{change:t.changeSelectDistributors},model:{value:t.dataForm.distributorId,callback:function(e){t.$set(t.dataForm,"distributorId",e)},expression:"dataForm.distributorId"}},t._l(t.distributor.userList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name+" 【"+t.areaName+"】",disabled:1===t.status,value:t.id}})})),1)],1)],1)],1),a("el-divider",{attrs:{"content-position":"left"}},[t._v("门店信息"),a("i",{staticClass:"el-icon-thumb thumb"})]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"名称：",prop:"storeName"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请输入"},model:{value:t.dataForm.storeName,callback:function(e){t.$set(t.dataForm,"storeName",e)},expression:"dataForm.storeName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"简称：",prop:"storeShortName"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请输入"},model:{value:t.dataForm.storeShortName,callback:function(e){t.$set(t.dataForm,"storeShortName",e)},expression:"dataForm.storeShortName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"门店类型：",prop:"storeType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:t.dataForm.storeType,callback:function(e){t.$set(t.dataForm,"storeType",e)},expression:"dataForm.storeType"}},t._l(t.storeTypeList,(function(t){return a("el-option",{key:t.dictCode,attrs:{label:t.dictName,value:t.dictCode}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"建店日期：",prop:"establishedTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:t.dataForm.establishedTime,callback:function(e){t.$set(t.dataForm,"establishedTime",e)},expression:"dataForm.establishedTime"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"面积：",prop:"area"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",clearable:""},model:{value:t.dataForm.area,callback:function(e){t.$set(t.dataForm,"area",e)},expression:"dataForm.area"}},[a("template",{slot:"append"},[t._v("m²")])],2)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"门店状态：",prop:"storeStatus"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:t.dataForm.storeStatus,callback:function(e){t.$set(t.dataForm,"storeStatus",e)},expression:"dataForm.storeStatus"}},t._l(t.storeStatusList,(function(t){return a("el-option",{key:t.dictCode,attrs:{label:t.dictName,value:t.dictCode}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"地址：",prop:"address"}},[a("el-input",{attrs:{placeholder:"请输入",readonly:""},model:{value:t.dataForm.address,callback:function(e){t.$set(t.dataForm,"address",e)},expression:"dataForm.address"}},[a("p",{attrs:{slot:"prepend"},slot:"prepend"},[t._v(t._s(t.dataForm.countyName))]),a("el-button",{staticClass:"select-position",attrs:{slot:"append",type:"primary",icon:"el-icon-search"},on:{click:t.showAreaMap},slot:"append"},[t._v("定位")])],1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"店长：",prop:"managerId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"","loading-text":"搜索中...",placeholder:"请选择"},on:{focus:t.getShopperList},model:{value:t.dataForm.managerId,callback:function(e){t.$set(t.dataForm,"managerId",e)},expression:"dataForm.managerId"}},t._l(t.managerList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,disabled:1===t.status,value:t.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"副店长：",prop:"assistantManagerIds"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",multiple:"","loading-text":"搜索中...",placeholder:"请选择"},on:{focus:t.getShopperList},model:{value:t.dataForm.assistantManagerIds,callback:function(e){t.$set(t.dataForm,"assistantManagerIds",e)},expression:"dataForm.assistantManagerIds"}},t._l(t.assistantManagerList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,disabled:1===t.status,value:t.id}})})),1)],1)],1)],1),a("el-divider",{attrs:{"content-position":"left"}},[t._v("展示信息"),a("i",{staticClass:"el-icon-thumb thumb"})]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"展示位置：",prop:"showLocation"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:t.dataForm.showLocation,callback:function(e){t.$set(t.dataForm,"showLocation",e)},expression:"dataForm.showLocation"}},t._l(t.storeLocationList,(function(t){return a("el-option",{key:t.dictCode,attrs:{label:t.dictName,value:t.dictCode}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"预约电话：",prop:"appointmentPhone"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请输入"},model:{value:t.dataForm.appointmentPhone,callback:function(e){t.$set(t.dataForm,"appointmentPhone",e)},expression:"dataForm.appointmentPhone"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"营业时间：",prop:"businessHours"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请输入"},model:{value:t.dataForm.businessHours,callback:function(e){t.$set(t.dataForm,"businessHours",e)},expression:"dataForm.businessHours"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-position"},on:{click:function(e){return t.dataFormSubmit("dataForm")}}},[t._v("保存")])],1)],1)],1)],1),t.mapVisible?a("select-area",{ref:"mapselectModal",attrs:{detailInfo:t.detailInfo},on:{locationInfo:t.getlocationInfo}}):t._e()],1)},s=[],o=(a("8e6e"),a("ac6a"),a("cadf"),a("456d"),a("bd86")),i=a("fa7d"),l=a("2f62"),n=a("73f5"),c=a("e7fe"),d=a("61f7");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p={components:{selectArea:c["a"]},data:function(){return{distributorName:"",storeStatusList:[],storeTypeList:[],storeLocationList:[],mapVisible:!1,selectDistributors:[],dialogVisible:!1,managerList:[],assistantManagerList:[],visible:!0,assistantManagerIds:"",managerId:"",addressInfo:{},detailInfo:{},shoperId:"",dataForm:{distributorId:"",storeName:"",storeShortName:"",storeType:"",establishedTime:"",area:"",storeStatus:"",businessHours:"",address:"",countyName:"",appointmentPhone:"",showLocation:"",code:""},userList:[],html:"",dataRule:{distributorId:[{required:!0,message:"经销商不能为空",trigger:"change"}],storeName:[{required:!0,message:"名称不能为空",trigger:"change"}],storeType:[{required:!0,message:"门店类型不能为空",trigger:"change"}],establishedTime:[{required:!0,message:"建店日期不能为空",trigger:"change"}],area:[{required:!0,message:"面积不能为空",trigger:"change"},{validator:d["d"],trigger:"change"}],storeStatus:[{required:!0,message:"门店状态不能为空",trigger:"change"}],stactivityScopeatus:[{required:!0,message:"活动范围不能为空",trigger:"change"}],address:[{required:!0,message:"地址不能为空",trigger:"change"}]}}},computed:m({},Object(l["d"])({distributor:"distributor",appData:"app"})),mounted:function(){this.getStoreType(),this.getStoreStatus(),this.getStoreShowLocation(),this.getDistributorList({size:1e3}),this.$route.query.id&&(this.dataForm.distributorId=this.$route.query.id),this.shoperId=this.$route.query.id},methods:m({},Object(l["b"])({getDistributorList:"getDistributorList"}),{},Object(l["c"])({setCodeList:"SET_CODE_LIST",setAreaName:"SET_AREA_NAME",closeCurrentPage:"CLOSE_CURRENT_PAGE"}),{setCode:function(t){this.dataForm.areaCode=t},changeSelectDistributors:function(t){this.shoperId=t},getShopperList:function(){var t=this;this.shoperId?Object(n["c"])({distributorId:this.shoperId}).then((function(e){200===e.code&&e.success&&(t.managerList=e.data,t.assistantManagerList=e.data)})):this.$message.info("请先选择经销商")},getDetail:function(t){var e=this;Object(n["e"])({id:t}).then((function(t){var a=t;e.detailInfo=Object(i["e"])(a),e.setCodeList([a.provinceCode,a.cityCode,a.countyCode]),e.distributorName=a.distributorName,a.showLocation=a.showLocation?parseInt(a.showLocation):"",e.dataForm=m({},a)}))},showAreaMap:function(){var t=this;this.mapVisible=!0,this.$nextTick((function(){t.$refs.mapselectModal.init(t.$refs.mapselectModal)}))},getlocationInfo:function(t){this.addressInfo=t,this.dataForm.address=t.address,this.dataForm.countyName=t.areaName},dataFormSubmit:function(){var t=this;t.dataForm.storeShortName||(t.dataForm.storeShortName=t.dataForm.storeName);var e=Object(i["k"])(Object(i["e"])(t.dataForm),this.addressInfo);e.assistantManagerIds=e.assistantManagerIds.join(),this.$refs["dataForm"].validate((function(a){a&&Object(n["a"])(e).then((function(e){200===e.code&&e.success?(t.$message.success("新增成功"),t.closeCurrentPage(t.$route.fullPath),t.$router.push("/store")):t.$message.error("新增失败")}))}))},getStoreType:function(){var t=this;Object(n["h"])().then((function(e){200===e.code&&e.success&&(t.storeTypeList=e.data)}))},getStoreStatus:function(){var t=this;Object(n["g"])().then((function(e){200===e.code&&e.success&&(t.storeStatusList=e.data)}))},getStoreShowLocation:function(){var t=this;Object(n["f"])().then((function(e){200===e.code&&e.success&&(t.storeLocationList=e.data)}))}})},b=p,h=(a("67843"),a("2877")),f=Object(h["a"])(b,r,s,!1,null,"d31753d6",null);e["default"]=f.exports},"0f69":function(t,e,a){},67843:function(t,e,a){"use strict";var r=a("0f69"),s=a.n(r);s.a}}]);