(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ece1f7c0"],{"9d72":function(t,e,a){"use strict";var s=a("f990"),r=a.n(s);r.a},b2fc:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"notice-container"},[a("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"110px"}},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("所属信息"),a("i",{staticClass:"el-icon-thumb thumb"})]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"经销商："}},[t._v("\n                      "+t._s(t.distributorName)+"\n                ")])],1)],1),a("el-divider",{attrs:{"content-position":"left"}},[t._v("门店信息"),a("i",{staticClass:"el-icon-thumb thumb"})]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"名称：",prop:"storeName"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请输入"},model:{value:t.dataForm.storeName,callback:function(e){t.$set(t.dataForm,"storeName",e)},expression:"dataForm.storeName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"简称：",prop:"storeShortName"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请输入"},model:{value:t.dataForm.storeShortName,callback:function(e){t.$set(t.dataForm,"storeShortName",e)},expression:"dataForm.storeShortName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"门店类型：",prop:"storeType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:t.dataForm.storeType,callback:function(e){t.$set(t.dataForm,"storeType",e)},expression:"dataForm.storeType"}},t._l(t.storeTypeList,(function(t){return a("el-option",{key:t.dictCode,attrs:{label:t.dictName,value:t.dictCode}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"建店日期：",prop:"establishedTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:t.dataForm.establishedTime,callback:function(e){t.$set(t.dataForm,"establishedTime",e)},expression:"dataForm.establishedTime"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"面积：",prop:"area"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",clearable:""},model:{value:t.dataForm.area,callback:function(e){t.$set(t.dataForm,"area",e)},expression:"dataForm.area"}},[a("template",{slot:"append"},[t._v("m²")])],2)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"门店状态：",prop:"storeStatus"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:t.dataForm.storeStatus,callback:function(e){t.$set(t.dataForm,"storeStatus",e)},expression:"dataForm.storeStatus"}},t._l(t.storeStatusList,(function(t){return a("el-option",{key:t.dictCode,attrs:{label:t.dictName,value:t.dictCode}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"地址：",prop:"address"}},[a("el-input",{attrs:{placeholder:"请输入",readonly:""},model:{value:t.dataForm.address,callback:function(e){t.$set(t.dataForm,"address",e)},expression:"dataForm.address"}},[a("p",{attrs:{slot:"prepend"},slot:"prepend"},[t._v(t._s(t.dataForm.provinceName+" - "+t.dataForm.cityName+" - "+t.dataForm.countyName))]),a("el-button",{staticClass:"select-position",attrs:{slot:"append",type:"primary",icon:"el-icon-search"},on:{click:t.showAreaMap},slot:"append"},[t._v("定位")])],1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"店长：",prop:"managerId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"","loading-text":"搜索中...",placeholder:"请选择"},model:{value:t.dataForm.managerId,callback:function(e){t.$set(t.dataForm,"managerId",e)},expression:"dataForm.managerId"}},t._l(t.managerList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,disabled:1===t.status,value:t.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"副店长：",prop:"assistantManagerIds"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",multiple:"","loading-text":"搜索中...",placeholder:"请选择"},model:{value:t.assistantManagerLists,callback:function(e){t.assistantManagerLists=e},expression:"assistantManagerLists"}},t._l(t.assistantManagerList,(function(t){return a("el-option",{key:t.index,attrs:{label:t.name,disabled:1===t.status,value:t.id}})})),1)],1)],1)],1),a("el-divider",{attrs:{"content-position":"left"}},[t._v("展示信息"),a("i",{staticClass:"el-icon-thumb thumb"})]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"展示位置：",prop:"showLocation"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:t.dataForm.showLocation,callback:function(e){t.$set(t.dataForm,"showLocation",e)},expression:"dataForm.showLocation"}},t._l(t.storeLocationList,(function(t){return a("el-option",{key:t.dictCode,attrs:{label:t.dictName,value:t.dictCode}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"预约电话：",prop:"appointmentPhone"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",clearable:""},model:{value:t.dataForm.appointmentPhone,callback:function(e){t.$set(t.dataForm,"appointmentPhone",e)},expression:"dataForm.appointmentPhone"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"营业时间：",prop:"businessHours"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",clearable:""},model:{value:t.dataForm.businessHours,callback:function(e){t.$set(t.dataForm,"businessHours",e)},expression:"dataForm.businessHours"}})],1)],1)],1),a("br"),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-position"},on:{click:function(e){return t.dataFormSubmit("dataForm")}}},[t._v("保存")])],1)],1)],1)],1),t.mapVisible?a("select-area",{ref:"mapselectModal",attrs:{detailInfo:t.detailInfo},on:{locationInfo:t.getlocationInfo}}):t._e()],1)},r=[],o=(a("8e6e"),a("ac6a"),a("cadf"),a("456d"),a("28a5"),a("bd86")),i=a("fa7d"),l=a("2f62"),n=a("73f5"),c=a("e7fe"),d=a("61f7");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p={components:{selectArea:c["a"]},data:function(){return{distributorName:"",storeStatusList:[],storeTypeList:[],storeLocationList:[],mapVisible:!1,selectDistributors:[],dialogVisible:!1,managerList:[],assistantManagerList:[],assistantManagerLists:[],visible:!0,addressInfo:{},detailInfo:{},dataForm:{distributorId:"",storeName:"",storeShortName:"",storeType:"",establishedTime:"",area:"",storeStatus:"",businessHours:"",address:"",countyName:"",appointmentPhone:"",showLocation:"",code:""},userList:[],html:"",dataRule:{distributorId:[{required:!0,message:"经销商不能为空",trigger:"change"}],storeName:[{required:!0,message:"名称不能为空",trigger:"change"}],storeType:[{required:!0,message:"门店类型不能为空",trigger:"change"}],establishedTime:[{required:!0,message:"建店日期不能为空",trigger:"change"}],area:[{required:!0,message:"面积不能为空",trigger:"change"},{validator:d["d"],trigger:"change"}],storeStatus:[{required:!0,message:"门店状态不能为空",trigger:"change"}],stactivityScopeatus:[{required:!0,message:"活动范围不能为空",trigger:"change"}],address:[{required:!0,message:"地址不能为空",trigger:"change"}]}}},computed:m({},Object(l["d"])({distributor:"distributor",appData:"app"})),watch:{},mounted:function(){var t=this,e=t.$route.query;e.id&&t.getDetail(e.id),e.distributorId&&t.getShopperList(e.distributorId),this.getStoreType(),this.getStoreStatus(),this.getStoreShowLocation(),this.getDistributorList({size:1e3})},methods:m({},Object(l["b"])({getDistributorList:"getDistributorList"}),{},Object(l["c"])({setCodeList:"SET_CODE_LIST",setAreaName:"SET_AREA_NAME",closeCurrentPage:"CLOSE_CURRENT_PAGE"}),{setCode:function(t){this.dataForm.areaCode=t},getShopperList:function(t){var e=this;Object(n["c"])({distributorId:t}).then((function(t){200===t.code&&t.success&&(e.managerList=t.data,e.assistantManagerList=t.data)}))},getDetail:function(t){var e=this;Object(n["e"])({id:t}).then((function(t){var a=t;e.detailInfo=Object(i["e"])(a),e.setCodeList([a.provinceCode,a.cityCode,a.countyCode]),e.setAreaName(a.countyName||a.cityName||a.provinceName),e.distributorName=a.distributorName,a.showLocation=a.showLocation?parseInt(a.showLocation):"",e.assistantManagerLists=t.assistantManagerIds&&t.assistantManagerIds.split(","),e.dataForm=m({},a)}))},showAreaMap:function(){var t=this,e=this.$route.query.id;this.mapVisible=!0,this.$nextTick((function(){t.$refs.mapselectModal.init(t.$refs.mapselectModal,e)}))},getlocationInfo:function(t){this.addressInfo=t,this.dataForm.address=t.address,this.dataForm.countyName=t.areaName,this.setCodeList([t.provinceCode,t.cityCode,t.countyCode])},dataFormSubmit:function(){var t=this.$route.query.id,e=this;e.dataForm.storeShortName||(e.dataForm.storeShortName=e.dataForm.storeName);var a=Object(i["k"])(Object(i["e"])(e.dataForm));a.assistantManagerIds=e.assistantManagerLists&&e.assistantManagerLists.join(),this.$refs["dataForm"].validate((function(s){if(s){var r=a;r.id=t,Object(n["b"])(a).then((function(t){200===t.code&&t.success?(e.$message.success("编辑成功"),e.closeCurrentPage(e.$route.fullPath),e.$router.push("/store")):e.$message.error("编辑失败")}))}}))},getStoreType:function(){var t=this;Object(n["h"])().then((function(e){200===e.code&&e.success&&(t.storeTypeList=e.data)}))},getStoreStatus:function(){var t=this;Object(n["g"])().then((function(e){200===e.code&&e.success&&(t.storeStatusList=e.data)}))},getStoreShowLocation:function(){var t=this;Object(n["f"])().then((function(e){200===e.code&&e.success&&(t.storeLocationList=e.data)}))}})},b=p,h=(a("9d72"),a("2877")),f=Object(h["a"])(b,s,r,!1,null,"6d10af9f",null);e["default"]=f.exports},f990:function(t,e,a){}}]);