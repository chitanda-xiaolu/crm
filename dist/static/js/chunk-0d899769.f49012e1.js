(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d899769"],{"0eea":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vue-scroll",{attrs:{ops:e.scrollops}},[a("el-form",{ref:"dataForm",staticClass:"form-box",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"130px"}},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("产品分类"),a("i",{staticClass:"el-icon-thumb thumb"})]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品分类：",prop:"speType"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择产品",debounce:1e3,options:e.treeData,props:e.optionProps,filterable:""},on:{change:e.hendleChangeCascader},model:{value:e.dataForm.speType,callback:function(t){e.$set(e.dataForm,"speType",t)},expression:"dataForm.speType"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品品牌：",size:"mini",prop:"productBrand"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"请选择"},model:{value:e.dataForm.productBrand,callback:function(t){e.$set(e.dataForm,"productBrand",t)},expression:"dataForm.productBrand"}},e._l(e.brandList,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"状态：",size:"mini",prop:"status",rules:{required:!0,message:"状态不能为空",trigger:"blur"}}},[a("el-radio-group",{model:{value:e.dataForm.status,callback:function(t){e.$set(e.dataForm,"status",t)},expression:"dataForm.status"}},[a("el-radio",{attrs:{label:"0"}},[e._v("上架")]),a("el-radio",{attrs:{label:"1"}},[e._v("下架")])],1)],1)],1)],1),a("el-divider",{attrs:{"content-position":"left"}},[e._v("产品信息"),a("i",{staticClass:"el-icon-thumb thumb"})]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"物料编码：",prop:"code"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:e.dataForm.code,callback:function(t){e.$set(e.dataForm,"code",t)},expression:"dataForm.code"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"酷家乐编号：",prop:"kjlCode"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:e.dataForm.kjlCode,callback:function(t){e.$set(e.dataForm,"kjlCode",t)},expression:"dataForm.kjlCode"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品名称(平台)：",prop:"name"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品名称(KJL)：",prop:"kjlName"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:e.dataForm.kjlName,callback:function(t){e.$set(e.dataForm,"kjlName",t)},expression:"dataForm.kjlName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"材料：",prop:"baseMetal"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"请选择"},model:{value:e.dataForm.baseMetal,callback:function(t){e.$set(e.dataForm,"baseMetal",t)},expression:"dataForm.baseMetal"}},e._l(e.packageMaterialList,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"颜色：",prop:"color"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"请选择"},model:{value:e.dataForm.color,callback:function(t){e.$set(e.dataForm,"color",t)},expression:"dataForm.color"}},e._l(e.packageColorList,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"型号：",prop:"model"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:e.dataForm.model,callback:function(t){e.$set(e.dataForm,"model",t)},expression:"dataForm.model"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"规格：",prop:"standards"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:e.dataForm.standards,callback:function(t){e.$set(e.dataForm,"standards",t)},expression:"dataForm.standards"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"包装规则：",prop:"packRule"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"请选择"},model:{value:e.dataForm.packRule,callback:function(t){e.$set(e.dataForm,"packRule",t)},expression:"dataForm.packRule"}},e._l(e.packageRuleList,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name+"【"+e.description+"】",value:e.code}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"宽：",prop:"width"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:e.dataForm.width,callback:function(t){e.$set(e.dataForm,"width",t)},expression:"dataForm.width"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"深：",prop:"deep"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:e.dataForm.deep,callback:function(t){e.$set(e.dataForm,"deep",t)},expression:"dataForm.deep"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"高：",prop:"height"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:e.dataForm.height,callback:function(t){e.$set(e.dataForm,"height",t)},expression:"dataForm.height"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"方案规则：",prop:"designRule"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"请选择"},model:{value:e.dataForm.designRule,callback:function(t){e.$set(e.dataForm,"designRule",t)},expression:"dataForm.designRule"}},e._l(e.programRuleList,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name+"【"+e.description+"】",value:e.code}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"库存：",prop:"inventory"}},[a("el-input",{attrs:{clearable:"",type:"number",placeholder:"请输入"},model:{value:e.dataForm.inventory,callback:function(t){e.$set(e.dataForm,"inventory",t)},expression:"dataForm.inventory"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品图片：",prop:"picPath"}},[a("el-upload",{ref:"upload",attrs:{action:"/upload/uploadFile","list-type":"picture-card","on-preview":e.handlePicturePreview,"http-request":e.uploadSectionFile,"on-change":e.changeUpload,"on-error":e.errorUpload,"on-remove":e.handleRemoveImg}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isInitUpload,expression:"isInitUpload"}],attrs:{size:"mini",type:"primary",icon:"el-icon-plus"}},[e._v("上传")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isInitUpload,expression:"!isInitUpload"}],staticStyle:{display:"flex"},attrs:{size:"small",type:"primary",icon:"el-icon-refresh"},on:{click:e.clearUploadedImage}},[e._v("更换")])],1),a("el-dialog",{staticClass:"image-dialog",attrs:{visible:e.picturePreviewVisible,modal:!1},on:{"update:visible":function(t){e.picturePreviewVisible=t}}},[a("img",{attrs:{width:"100%",src:e.ImageUrls,alt:""}})])],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"说明：",prop:"description"}},[a("el-input",{attrs:{clearable:"",type:"textarea",placeholder:"请输入"},model:{value:e.dataForm.description,callback:function(t){e.$set(e.dataForm,"description",t)},expression:"dataForm.description"}})],1)],1)],1),a("el-divider",{attrs:{"content-position":"left"}},[e._v("价格信息"),a("i",{staticClass:"el-icon-thumb thumb"})]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"直接下单：",prop:"isOrder",rules:{required:!0,message:"状态不能为空",trigger:"blur"}}},[a("el-radio-group",{model:{value:e.dataForm.isOrder,callback:function(t){e.$set(e.dataForm,"isOrder",t)},expression:"dataForm.isOrder"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"是否外协：",prop:"isAssist",rules:{required:!0,message:"状态不能为空",trigger:"blur"}}},[a("el-radio-group",{model:{value:e.dataForm.isAssist,callback:function(t){e.$set(e.dataForm,"isAssist",t)},expression:"dataForm.isAssist"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"单位：",prop:"unit",rules:{required:!0,message:"单位不能为空",trigger:"change"}}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"请选择"},model:{value:e.dataForm.unit,callback:function(t){e.$set(e.dataForm,"unit",t)},expression:"dataForm.unit"}},e._l(e.peerList,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"零售价：",prop:"retailPrice"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入"},on:{blur:function(t){return e.adddot(e.dataForm.retailPrice,1)}},model:{value:e.dataForm.retailPrice,callback:function(t){e.$set(e.dataForm,"retailPrice",t)},expression:"dataForm.retailPrice"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"理论结算价：",prop:"nominalSettlementPrice"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入"},on:{blur:function(t){return e.adddot(e.dataForm.nominalSettlementPrice,2)}},model:{value:e.dataForm.nominalSettlementPrice,callback:function(t){e.$set(e.dataForm,"nominalSettlementPrice",t)},expression:"dataForm.nominalSettlementPrice"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"供货价：",prop:"supplyPrice"}},[a("el-input",{attrs:{onKeypress:"return (/^\\d+(\\.\\d+)?$/.test(String.fromCharCode(event.keyCode)))",clearable:"",placeholder:"请输入"},on:{blur:function(t){return e.adddot(e.dataForm.supplyPrice,3)}},model:{value:e.dataForm.supplyPrice,callback:function(t){e.$set(e.dataForm,"supplyPrice",t)},expression:"dataForm.supplyPrice"}})],1)],1)],1),a("el-divider",{attrs:{"content-position":"left"}},[e._v("可销售范围"),a("i",{staticClass:"el-icon-thumb thumb"})]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"可销售范围：",prop:"salesScope",rules:{required:!0,message:"销售范围不能为空",trigger:"blur"}}},[a("el-radio-group",{model:{value:e.dataForm.salesScope,callback:function(t){e.$set(e.dataForm,"salesScope",t)},expression:"dataForm.salesScope"}},[a("el-radio",{attrs:{label:"0"}},[e._v("布兰莎")]),a("el-radio",{attrs:{label:"1"}},[e._v("空&间")]),a("el-radio",{attrs:{label:"2"}},[e._v("布兰莎、空&间")])],1)],1)],1)],1),a("div",{staticClass:"btns"},[a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-position"},on:{click:function(t){return e.sveAddDataFormSubmit("dataForm")}}},[e._v("保存并新增下一个")])],1)],1)],1)],1)},l=[],o=a("fa7d"),i=a("61f7"),s=a("b562"),n=a("c4c8"),c=a("47fd"),d={data:function(){return{scrollops:c["a"],images:[],uploadList:[],brandList:[],picturePreviewVisible:!1,ImageUrls:"",treeData:[],peerList:[],packageRuleList:[],programRuleList:[],packageColorList:[],packageMaterialList:[],isMax:!1,isInitUpload:!0,optionProps:{disabled:"status"},dataForm:{standards:"",kjlName:"",picPath:"",description:"",kjlCode:"",supplyPrice:"",activityId:"",nominalSettlementPrice:"",retailPrice:"",speType:"",status:"0",code:"",name:"",isAssist:"1",isOrder:"1",packRule:"",productBrand:"",inventory:"",salesScope:"0",widdth:"",deep:"",height:"",baseMetal:"",color:""},dataRule:{speType:[{required:!0,message:"产品分类不能为空",trigger:"change"}],picPath:[{required:!0,message:"产品图片不能为空",trigger:"change"}],code:[{required:!0,message:"物料编码不能为空",trigger:"change"}],name:[{required:!0,message:"名称不能为空",trigger:"change"}],packRule:[{required:!0,message:"包装规则不能为空",trigger:"change"}],designRule:[{required:!0,message:"方案规则不能为空",trigger:"change"}],standards:[{required:!0,message:"规格不能为空",trigger:"change"}],model:[{required:!0,message:"型号不能为空",trigger:"change"}],retailPrice:[{required:!0,validator:i["e"],trigger:"change"}],nominalSettlementPrice:[{required:!0,validator:i["e"],trigger:"change"}],width:[{required:!0,validator:i["e"],trigger:"change"}],deep:[{required:!0,validator:i["e"],trigger:"change"}],height:[{required:!0,validator:i["e"],trigger:"change"}]}}},computed:{},mounted:function(){this.init()},methods:{init:function(){this.getProTree(),this.getProductPeerEnum(),this.getProductBrandEnum(),this.getProductProgramEnum(),this.getProductPackageEnum(),this.getProductColor(),this.getProductMateril()},getProTree:function(){var e=this;Object(n["g"])({productType:10001}).then((function(t){200===t.code&&t.success&&(e.treeData=t.data)}))},getProductPeerEnum:function(){var e=this;Object(n["d"])({typeCode:"unit_type"}).then((function(t){200===t.code&&t.success&&(e.peerList=t.data)}))},getProductBrandEnum:function(){var e=this;Object(n["d"])({typeCode:"product_brand"}).then((function(t){200===t.code&&t.success&&(e.brandList=t.data)}))},getProductProgramEnum:function(){var e=this;Object(n["d"])({typeCode:"design_rule"}).then((function(t){200===t.code&&t.success&&(e.programRuleList=t.data)}))},getProductPackageEnum:function(){var e=this;Object(n["d"])({typeCode:"pack_rule"}).then((function(t){200===t.code&&t.success&&(e.packageRuleList=t.data)}))},getProductColor:function(){var e=this;Object(n["d"])({typeCode:"color"}).then((function(t){200===t.code&&t.success&&(e.packageColorList=t.data)}))},getProductMateril:function(){var e=this;Object(n["d"])({typeCode:"material"}).then((function(t){200===t.code&&t.success&&(e.packageMaterialList=t.data)}))},sveAddDataFormSubmit:function(){var e=this,t=Object(o["e"])(e.dataForm);t.picPath=this.images.join(),e.dataForm.speType&&(t.speType=e.dataForm.speType[e.dataForm.speType.length-1]),this.$refs["dataForm"].validate((function(a){a&&Object(n["b"])(t).then((function(t){200===t.code&&t.success&&(e.$message.success("操作成功"),e.$refs["dataForm"].resetFields(),e.getProTree(),e.$refs.upload.clearFiles())}))}))},adddot:function(e,t){e=e&&-1===e.indexOf(".")?Object(o["a"])(e):(+e).toFixed(2),1===t?this.dataForm.retailPrice=e:2===t?this.dataForm.nominalSettlementPrice=e:3===t&&(this.dataForm.supplyPrice=e)},clearUploadedImage:function(){this.$refs.upload.clearFiles()},changeUpload:function(e,t){t.length>=1&&(this.isMax=!0)},errorUpload:function(e,t,a){this.$message.error("上传失败"),a.length>=1?this.isMax=!0:this.isMax=!1},handlePicturePreview:function(e){this.ImageUrls=e.url,this.picturePreviewVisible=!0},uploadSectionFile:function(e){var t=this,a=new FormData;a.append("file",e.file),a.append("type",3),Object(s["d"])(a).then((function(a){t.images.push(a.data),t.uploadList.push({uid:e.file.uid,url:a.data}),t.dataForm.picPath=a.data,t.isInitUpload=!1,t.$refs["dataForm"]&&t.$refs["dataForm"].validateField&&t.$refs["dataForm"].validateField("picPath")}))},handleRemoveImg:function(e,t){var a=this,r=this.uploadList,l="",o=[],i=[];r&&r.map((function(t){t.uid===e.uid&&(l=t.url),t.uid!==e.uid&&(o.push(t.url),i.push(t))})),o=o.filter((function(e){return"undefined"!==e})),this.images=o,l&&Object(s["b"])({url:l}).then((function(e){200===e.code&&e.success?(a.uploadList=i,a.isInitUpload=!0,a.$message.success("删除成功")):a.$message.error("操作失败")})),t.length<1&&(this.isMax=!1)},hendleChangeCascader:function(){this.$refs["dataForm"]&&this.$refs["dataForm"].validateField("speType")}}},u=d,p=(a("1d39"),a("2877")),m=Object(p["a"])(u,r,l,!1,null,"50270b86",null);t["default"]=m.exports},"1d39":function(e,t,a){"use strict";var r=a("a07f"),l=a.n(r);l.a},"47fd":function(e,t,a){"use strict";var r={scrollPanel:{scrollingX:!1},bar:{hoverStyle:!0,onlyShowBarOnScroll:!1,background:"#ccc",scrollingX:!1,initialScrollX:!1,size:"5px"},rail:{}};t["a"]=r},"61f7":function(e,t,a){"use strict";a.d(t,"f",(function(){return r})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return n}));a("a481");function r(e,t,a){/^[0-9]{11}$/.test(t)?a():a(new Error("请输入正确的手机号"))}function l(e,t,a){/^([1-9]\d*|0)(\.\d*[0-9])?$/.test(t)?a():a(new Error("请输入正数"))}function o(e,t,a){parseFloat(t)>0?a():a(new Error("请输入正数"))}function i(e){var t={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"',"#40":"(","#41":")"};return e&&e.replace(/&(lt|gt|nbsp|amp|quot|#40|#41);/gi,(function(e,a){return t[a]}))}function s(e){var t=new Date(e),a=t.getFullYear()+"-",r=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",l=t.getDate()<10?"0"+t.getDate():t.getDate(),o=a+r+l;return o}function n(e){var t=e.substring(0,19);t=t.replace(/-/g,"/");var a=new Date(t).getTime();return a}},a07f:function(e,t,a){},b562:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return s}));var r=a("b775");function l(e){return Object(r["a"])({url:"/areaCode/list",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/upload/uploadFile",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/upload/deleteFile",method:"delete",params:e})}function s(e){return Object(r["a"])({url:"/dict/list",method:"get",params:e})}},c4c8:function(e,t,a){"use strict";a.d(t,"f",(function(){return l})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"e",(function(){return s})),a.d(t,"g",(function(){return n})),a.d(t,"a",(function(){return c})),a.d(t,"d",(function(){return d}));var r=a("b775");function l(e){return Object(r["a"])({url:"/productLib/hq/list",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/productLib/hq/addItem",method:"post",params:e})}function i(e){return Object(r["a"])({url:"/productLib/hq/editItem",method:"put",params:e})}function s(e){return Object(r["a"])({url:"/productLib/hq/detail",method:"get",params:e})}function n(e){return Object(r["a"])({url:"/productLib/hq/dict/list",method:"get",params:e})}function c(e){return Object(r["a"])({url:"/productLib/hq/editItem/status",method:"put",params:e})}function d(e){return Object(r["a"])({url:"/productLib/hq/type/list",method:"get",params:e})}}}]);