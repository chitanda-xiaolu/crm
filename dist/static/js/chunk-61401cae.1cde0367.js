(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61401cae"],{"058a":function(e,t,a){},"0a26":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-box dis-flex-col",staticStyle:{overflow:"scroll"}},[a("div",{staticClass:"top-divider"},[a("i",{staticClass:"el-icon-s-shop"}),e._v(" "+e._s(e.areaName)+" ")]),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"详情信息",name:"first"}},[a("dealer-info",{on:{areaInfo:e.areaInfo}})],1),a("el-tab-pane",{staticStyle:{height:"750px"},attrs:{label:"部门管理",name:"second"}},[a("dealer-dept")],1),e.hasPermission(e.Permission.distributor.account.code)?a("el-tab-pane",{attrs:{label:"资金管理",name:"account"}},[a("AccountInfo")],1):e._e()],1)],1)},s=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-box dis-flex-row"},[a("div",{staticClass:"main-box-left",staticStyle:{border:"none"}},[a("dealer-tree",{on:{getDeptDataFromTree:e.getDeptData,emitDistributorId:e.getemitDistributorId}}),a("el-button",{staticClass:"el-add-store",attrs:{type:"primary",plain:""},on:{click:e.createStore}},[a("i",{staticClass:"el-icon-plus"}),e._v("新增门店")])],1),a("div",{staticClass:"main-box-right dis-flex-col"},[a("best-tables",{attrs:{"data-list":e.userList,optBtnList:this.optBtnList(),total:e.total},on:{optThisRow:e.optThisRow,bindkjl:e.bindkjl}})],1),a("el-dialog",{attrs:{title:"绑定酷家乐(KJL）账号",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t},open:e.openbindDialog}},[a("el-form",{ref:"bindkjlDialog",staticClass:"demo-dynamic",attrs:{model:e.bindkjlDialog,"label-width":"100px"}},[a("el-form-item",{attrs:{prop:"email",label:"账号",rules:[{required:!0,message:"请输入账号",trigger:"blur"},{type:"email",message:"请输入正确账号格式",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"79%"},attrs:{clearable:""},model:{value:e.bindkjlDialog.email,callback:function(t){e.$set(e.bindkjlDialog,"email",t)},expression:"bindkjlDialog.email"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.bindKjlNo("bindkjlDialog")}}},[e._v("确 定")])],1)],1)],1)},i=[],n=(a("8e6e"),a("ac6a"),a("cadf"),a("456d"),a("bd86")),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tree",{attrs:{data:e.data,props:e.defaultProps,"node-key":"value","default-checked-keys":e.checkedKeys,"highlight-current":!0},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node,s=t.data;return a("span",{staticClass:"custom-tree-node"},[a("p",{staticClass:"item-label-tree",class:{"list-item":!s.code}},[a("span",{staticClass:"node-label",class:{grey:1==s.status,super:s.code},attrs:{title:r.label},on:{click:function(t){return e.handleNodeClick(s)}}},[e._v(e._s(r.label)+"\n                ")]),a("span",{staticClass:"is-visibility"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:s.storeId,expression:"data.storeId"}],staticClass:"detail-btn",attrs:{type:"text",size:"mini"},on:{click:function(){return e.handlestoteDetail(r,s)}}},[e._v("\n                        详情\n                    ")])],1)])])}}])})},l=[],d=(a("7f7f"),a("7306")),u={data:function(){return{data:[],defaultProps:{children:"children",label:"label"},checkedKeys:[]}},mounted:function(){this.init()},methods:{init:function(){var e=this,t={distributorId:this.$route.params.id};Object(d["g"])(t).then((function(t){200===t.code&&t.success&&(e.$emit("emitDistributorId",t.data.id),t.data.label="".concat(t.data.name,"【 ").concat(1===t.data.type?"直营店":"加盟店"," 】"),t.data.value=t.data.id,t.data.children=t.data.deptTreeViewNodes,e.data=[t.data],e.checkedKeys.push(e.data[0].value))})).then((function(){document.getElementsByClassName("is-checked")[0].click()}))},handleNodeClick:function(e){this.checkedKeys.length=0,this.$emit("getDeptDataFromTree",e)},handlestoteDetail:function(e,t){this.$router.push({path:"/store/detail/"+t.storeId})}}},m=u,p=(a("cebc"),a("2877")),h=Object(p["a"])(m,c,l,!1,null,null,null),b=h.exports,f=a("184e"),g=a("2f62"),y=a("fa7d"),v=a("247d");function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var D={name:"distributorDetail",components:{DealerTree:b,BestTables:f["a"]},data:function(){return{key:"distributorDetail",dataListLoading:!1,userList:[],total:0,deptId:"",emitDistributorId:"",dialogVisible:!1,bindkjlDialog:{email:""},rowId:"",kjlAccount:""}},computed:O({},Object(g["d"])({queryData:"queryCondition"})),methods:{optBtnList:function(){return v["a"].distributorDetail.btns},optThisRow:function(e,t){switch(t){case"reset":this.resetPassword(e);break;case"bind":this.bindkjl(e);break}},getDataList:function(){var e=this,t={deptId:e.deptId,distributorId:e.$route.params.id},a=Object(y["k"])(this.queryData.query[this.key].pagination,t);Object(d["i"])(a).then((function(t){200===t.code&&t.success&&(e.userList=t.data.records,e.total=t.data.total)}))},getDeptData:function(e){this.deptId!==e.value&&(this.deptId=e.code?"":e.value,this.getDataList())},getemitDistributorId:function(e){this.emitDistributorId=e},resetPassword:function(e){var t=this;Object(d["h"])({userId:e.id}).then((function(e){200===e.code&&e.success?t.$message.success({message:"重置成功,当前密码是:".concat(e.data.password),duration:4e3}):t.$message({message:e.message||"请求错误",type:"error",duration:3e3})}))},bindkjl:function(e){this.kjlAccount=e.kjlAccount,this.dialogVisible=!0,this.rowId=e.id},bindEmployeeHandle:function(){var e=this,t=e.bindkjlDialog.email,a=e.rowId;Object(d["b"])({kjlAccount:t,id:a}).then((function(t){200===t.code&&t.success&&(e.$message.success("操作成功"),e.dialogVisible=!1,e.getDataList())}))},bindKjlNo:function(e){var t=this,a=this,r=a.bindkjlDialog.email;a.$refs[e].validate((function(e){if(!e)return!1;Object(d["c"])({kjlAccount:r}).then((function(e){if(200===e.code&&e.success)if(e.data.isBind){var r=e.data.bindList,s=[];r&&r.map((function(e){s.push(e)})),t.$confirm("该账号已绑定过: ".concat(s.join(),", 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.bindEmployeeHandle()})).catch((function(){}))}else a.bindEmployeeHandle()}))}))},openbindDialog:function(){this.$refs["loginForm"]&&this.$refs["loginForm"].clearValidate(),this.bindkjlDialog.email=this.kjlAccount||""},createStore:function(){this.$router.push({path:"/store/add",query:{id:this.emitDistributorId}})},tableSizeChange:function(){this.getDataList()},tableCurrentChange:function(){this.getDataList()}}},_=D,F=(a("efe8"),Object(p["a"])(_,o,i,!1,null,"42917810",null)),k=F.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-list"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("基础信息"),a("i",{staticClass:"el-icon-thumb thumb"})]),a("el-row",{staticClass:"info-content"},[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"text-label"},[e._v("经销商编号:")]),a("span",[e._v(e._s(e.code))])]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"text-label"},[e._v("所在区域:")]),a("span",[e._v(e._s(e.areaName))])]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"text-label"},[e._v("代理地点:")]),a("span",[e._v(e._s(e.agentAddress))])])],1),a("el-row",{staticClass:"info-content"},[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"text-label"},[e._v("负责人:")]),a("span",[e._v(e._s(e.name))])]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"text-label"},[e._v("负责人手机:")]),a("span",[e._v(e._s(e.phone))])]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"text-label"},[e._v("加盟日期:")]),a("span",[e._v(e._s(e.DWY_UTILS.getTimeYMD(e.joinTime)))])])],1),a("el-row",{staticClass:"info-content"},[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"text-label"},[e._v("招商员工:")]),a("span",[e._v(e._s(e.businessName))])]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"text-label"},[e._v("经营类型:")]),a("span",[e._v(e._s(1===e.type?"直营":"加盟"))])]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"text-label"},[e._v("经营状态:")]),a("span",[e._v(e._s(0===e.status?"启用":"禁用"))])])],1),a("el-row",{staticClass:"info-content"},[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"text-label"},[e._v("收货地址:")]),a("span",[e._v(e._s(e.address))])])],1),a("el-divider",{attrs:{"content-position":"left"}},[e._v("系统信息"),a("i",{staticClass:"el-icon-thumb thumb"})]),a("el-row",{staticClass:"info-content"},[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"text-label"},[e._v("创建人:")]),a("span",[e._v(e._s(e.createUser))])]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"text-label"},[e._v("创建时间:")]),a("span",[e._v(e._s(e.DWY_UTILS.getTimeYMD(e.createTime)))])])],1),a("el-row",{staticClass:"info-content"},[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"text-label"},[e._v("更新人:")]),a("span",[e._v(e._s(e.updateUser))])]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"text-label"},[e._v("更新时间:")]),a("span",[e._v(e._s(e.DWY_UTILS.getTimeYMD(e.updateTime)))])])],1),a("el-divider",{attrs:{"content-position":"left"}},[e._v("关联信息"),a("i",{staticClass:"el-icon-thumb thumb"})]),a("el-row",{staticClass:"info-content"},[a("el-col",{staticClass:"width-all"},[a("span",{staticClass:"text-label"},[e._v("所属片区:")]),a("span",[e._v(e._s(e.regionName))])])],1),a("el-button",{staticClass:"edit-position",attrs:{type:"warning",plain:"",icon:"el-icon-edit"},on:{click:e.editDealer}},[e._v("编辑")]),a("add-or-update",{ref:"addOrUpdate"})],1)},T=[],C=a("c0ae");function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $={data:function(){return{id:"",code:"",regionName:"",agentAddress:"",name:"",phone:"",joinTime:"",businessName:"",businessId:"",type:1,status:0,createUser:"",createTime:"",updateUser:"",updateTime:"",areaName:"",codeList:[],address:""}},components:{AddOrUpdate:C["a"]},watch:{$route:function(e,t){"经销商详情"===e.meta.title&&this.init()}},mounted:function(){this.init()},methods:P({},Object(g["c"])({setDialogStatus:"SET_DIALOGSTATUS",setCodeList:"SET_CODE_LIST"}),{init:function(){var e=this;e.$route.params&&Object(d["e"])(e.$route.params).then((function(t){if(200===t.code&&t.success){var a=t.data;for(var r in e._data)e[r]=a[r];e.codeList=[],e.codeList.push(a.provinceCode),a.cityCode&&e.codeList.push(a.cityCode),a.countyCode&&e.codeList.push(a.countyCode),e.$emit("areaInfo",e.areaName)}else e.$message.error(t.message||"服务器异常")}))},editDealer:function(){this.$refs.addOrUpdate.editAction(this._data),this.setCodeList(this.codeList),this.setDialogStatus(!0)}})},S=$,I=(a("bcd9"),Object(p["a"])(S,j,T,!1,null,"42023ad2",null)),R=I.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("total-money"),a("el-tabs",{staticClass:"first-tabs",model:{value:e.activeCashTabName,callback:function(t){e.activeCashTabName=t},expression:"activeCashTabName"}},[a("el-tab-pane",{attrs:{label:"现金",name:"cash"}},[a("el-tag",{attrs:{type:"warning"}},[e._v("累计充值："),a("span",{staticClass:"zj_show_css"},[e._v(e._s(e.renderMoney((e.accountState.accountInfo.cashRechargeAccumulate||0).toFixed(2))))]),e._v("元")]),a("el-tag",{attrs:{type:"danger"}},[e._v("累计扣款："),a("span",{staticClass:"zj_show_css"},[e._v(e._s(e.renderMoney((e.accountState.accountInfo.cashDeductAccumulate||0).toFixed(2))))]),e._v("元")]),a("el-tag",{attrs:{type:"success"}},[e._v("现金余额："),a("span",{staticClass:"zj_show_css"},[e._v(e._s(e.renderMoney((e.accountState.accountInfo.cashTotal||0).toFixed(2))))]),e._v("元")]),a("div",{staticClass:"addbtn"},[a("el-button",{attrs:{type:"warning",icon:"el-icon-plus",plain:""},on:{click:e.addCashHandle}},[e._v("充值")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-plus",plain:""},on:{click:e.addDeductionHandle}},[e._v("扣款")])],1),a("el-tabs",{staticStyle:{"margin-top":"15px"},attrs:{type:"card"},model:{value:e.activeCashChildTabName,callback:function(t){e.activeCashChildTabName=t},expression:"activeCashChildTabName"}},[a("el-tab-pane",{attrs:{label:"充值",name:"recharge"}},[a("div",{staticClass:"date"},[a("span",[e._v("查询日期")]),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.changeCashRechargeTime},model:{value:e.cashRechargeTime,callback:function(t){e.cashRechargeTime=t},expression:"cashRechargeTime"}})],1),a("el-table",{attrs:{data:e.accountState.cashRechargeList,"highlight-current-row":"",border:"","header-cell-style":{"background-color":"#f0f0f0"}}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((e.rechargePage.current-1)*e.rechargePage.size+t.$index+1))])]}}])}),a("el-table-column",{attrs:{property:"money",align:"right",label:"金额（元）"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.renderMoney(t.row.money)))])]}}])}),a("el-table-column",{attrs:{property:"account",label:"充值账号"}}),a("el-table-column",{attrs:{property:"proofPath",label:"凭证"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("viewer",{directives:[{name:"show",rawName:"v-show",value:e.row.proofPath,expression:"scope.row.proofPath"}]},[a("img",{key:e.row.path,staticStyle:{cursor:"pointer"},attrs:{src:e.row.proofPath,alt:e.row.title,width:"25px",height:"22px"}})])]}}])}),a("el-table-column",{attrs:{property:"remark",label:"备注"}}),a("el-table-column",{attrs:{property:"createTime",label:"记录时间"}}),a("el-table-column",{attrs:{property:"createUserName",label:"记录人"}})],1)],1),a("el-tab-pane",{attrs:{label:"扣款",name:"deduction"}},[a("div",{staticClass:"date"},[a("span",[e._v("查询日期")]),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.changeCashDeductTime},model:{value:e.cashDeductTime,callback:function(t){e.cashDeductTime=t},expression:"cashDeductTime"}})],1),a("el-table",{attrs:{data:e.accountState.cashRebateList,"highlight-current-row":"",border:"","header-cell-style":{"background-color":"#f0f0f0"}}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((e.rechargePage.current-1)*e.rechargePage.size+t.$index+1))])]}}])}),a("el-table-column",{attrs:{property:"customerName",label:"客户姓名",width:"120"}}),a("el-table-column",{attrs:{property:"deductTypeName",label:"扣款类型",width:"120"}}),a("el-table-column",{attrs:{property:"money",align:"right",label:"金额（元）",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.renderMoney((t.row.money||0).toFixed(2))))])]}}])}),a("el-table-column",{attrs:{property:"orderIds",label:"扣款订单",width:"200"}}),a("el-table-column",{attrs:{property:"createTime",label:"扣款时间",width:"170"}}),a("el-table-column",{attrs:{property:"createUserName",label:"扣款人"}})],1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"返利",name:"profit"}},[a("el-tag",{attrs:{type:"warning"}},[e._v("累计充值："),a("span",{staticClass:"zj_show_css"},[e._v(e._s(e.renderMoney((e.accountState.accountInfo.rebateRechargeAccumulate||0).toFixed(2))))]),e._v("元")]),a("el-tag",{attrs:{type:"danger"}},[e._v("累计扣款："),a("span",{staticClass:"zj_show_css"},[e._v(e._s(e.renderMoney((e.accountState.accountInfo.rebateDeductAccumulate||0).toFixed(2))))]),e._v("元")]),a("el-tag",{attrs:{type:"success"}},[e._v("返利余额："),a("span",{staticClass:"zj_show_css"},[e._v(e._s(e.renderMoney((e.accountState.accountInfo.rebateTotal||0).toFixed(2))))]),e._v("元")]),a("div",{staticClass:"addbtn"},[a("el-button",{attrs:{type:"warning",icon:"el-icon-plus",plain:""},on:{click:e.addCashFanliHandle}},[e._v("充值")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-plus",plain:""},on:{click:e.addDeductionFanliHandle}},[e._v("扣款")])],1),a("el-tabs",{staticStyle:{"margin-top":"15px"},attrs:{type:"card"},model:{value:e.activeFanliTabName,callback:function(t){e.activeFanliTabName=t},expression:"activeFanliTabName"}},[a("el-tab-pane",{attrs:{label:"充值",name:"recharge"}},[a("div",{staticClass:"date"},[a("span",[e._v("查询日期")]),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.changeRebateRechargeTime},model:{value:e.rebateRechargeTime,callback:function(t){e.rebateRechargeTime=t},expression:"rebateRechargeTime"}})],1),a("el-table",{attrs:{data:e.accountState.flRechargeList,"highlight-current-row":"",border:"","header-cell-style":{"background-color":"#f0f0f0"}}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((e.rebatePage.current-1)*e.rebatePage.size+t.$index+1))])]}}])}),a("el-table-column",{attrs:{property:"money",align:"right",label:"金额（元）"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.renderMoney(t.row.money)))])]}}])}),a("el-table-column",{attrs:{property:"account",label:"充值账号"}}),a("el-table-column",{attrs:{property:"proofPath",label:"凭证"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("viewer",{directives:[{name:"show",rawName:"v-show",value:t.row.proofPath,expression:"scope.row.proofPath"}],staticClass:"img-outer-box",attrs:{images:t.row.proofPathList}},e._l(t.row.proofPathList,(function(e,t){return a("img",{key:t,staticClass:"row-image-preview",attrs:{src:e}})})),0)]}}])}),a("el-table-column",{attrs:{property:"remark",label:"备注"}}),a("el-table-column",{attrs:{property:"createTime",label:"记录时间"}}),a("el-table-column",{attrs:{property:"createUserName",label:"记录人"}})],1)],1),a("el-tab-pane",{attrs:{label:"扣款",name:"deduction"}},[a("div",{staticClass:"date"},[a("span",[e._v("查询日期")]),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.changeRebateDeductTime},model:{value:e.rebateDeductTime,callback:function(t){e.rebateDeductTime=t},expression:"rebateDeductTime"}})],1),a("el-table",{attrs:{data:e.accountState.flRebateList,"highlight-current-row":"",border:"","header-cell-style":{"background-color":"#f0f0f0"}}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((e.rechargePage.current-1)*e.rechargePage.size+t.$index+1))])]}}])}),a("el-table-column",{attrs:{property:"customerName",label:"客户姓名",width:"120"}}),a("el-table-column",{attrs:{property:"deductTypeName",label:"扣款类型",width:"120"}}),a("el-table-column",{attrs:{property:"money",align:"right",label:"金额（元）",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.renderMoney((t.row.money||0).toFixed(2))))])]}}])}),a("el-table-column",{attrs:{property:"orderIds",label:"扣款订单",width:"200"}}),a("el-table-column",{attrs:{property:"createTime",label:"扣款时间",width:"170"}}),a("el-table-column",{attrs:{property:"createUserName",label:"扣款人"}})],1)],1)],1)],1),a("el-tab-pane"),a("el-tab-pane"),a("el-tab-pane"),a("el-tab-pane",{attrs:{label:"对账管理",name:"recon"}},[a("Reconciliation")],1),a("el-tab-pane",{staticClass:"right-tab",attrs:{label:"充值账号管理",name:"number"}},[a("rechargeAccount")],1)],1),a("cashRecharge",{ref:"cashrechargeDom"}),a("cashDeduction",{ref:"cashdeductionDom"}),a("FanliRecharge",{ref:"fanliRechargeDom"}),a("FanliDeduction",{ref:"fanlideductionDom"}),a("AddAccountNumber",{ref:"addaccountnumberDom"})],1)},A=[],N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"新增现金充值","close-on-click-modal":!1,visible:e.visible,"destroy-on-close":!0,width:"30%"},on:{"update:visible":function(t){e.visible=t},open:function(t){return e.showModal()}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"充值账号：",prop:"paymentAccount"}},[a("el-select",{staticStyle:{width:"80%"},attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:0==e.paymentAccountList.length?"请先创建充值账号":"请选择"},model:{value:e.dataForm.paymentAccount,callback:function(t){e.$set(e.dataForm,"paymentAccount",t)},expression:"dataForm.paymentAccount"}},e._l(e.paymentAccountList,(function(e){return a("el-option",{key:e.id,attrs:{label:"【"+e.accountHolder+"-"+e.accountTypeName+"】"+e.account,disabled:1==e.status,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"充值金额：",prop:"money"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{clearable:"",placeholder:"请输入"},on:{blur:e.adddot},model:{value:e.dataForm.money,callback:function(t){e.$set(e.dataForm,"money",t)},expression:"dataForm.money"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"充值类型：",prop:"rechargeType"}},[a("el-select",{staticStyle:{width:"80%"},attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:"请选择"},on:{change:e.changeRechargeType},model:{value:e.dataForm.rechargeType,callback:function(t){e.$set(e.dataForm,"rechargeType",t)},expression:"dataForm.rechargeType"}},e._l(e.rechargeTypeSelect,(function(e){return a("el-option",{key:e.dictCode,attrs:{label:e.dictName,value:e.dictCode}})})),1)],1)],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:2===e.dataForm.rechargeType,expression:"dataForm.rechargeType === 2"}],attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"充值订单编号：",prop:"orderCode",rules:[{required:2===e.dataForm.rechargeType,message:"充值订单编号不能为空",trigger:"blur"}]}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入",clearable:""},on:{blur:e.checkOrder},model:{value:e.dataForm.orderCode,callback:function(t){e.$set(e.dataForm,"orderCode",t)},expression:"dataForm.orderCode"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"充值时间：",prop:"rechargeTime"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd","picker-options":e.pickerEnd,placeholder:"选择日期"},model:{value:e.dataForm.rechargeTime,callback:function(t){e.$set(e.dataForm,"rechargeTime",t)},expression:"dataForm.rechargeTime"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"凭证：",size:"mini",prop:"proofPath"}},[a("el-upload",{class:{disabled:e.isMax},attrs:{action:"/upload/uploadFile","list-type":"picture-card","on-preview":e.handlePicturePreview,"http-request":e.uploadSectionFile,"on-change":e.changeUpload,"on-error":e.errorUpload,"on-remove":e.handleRemoveImg}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{staticClass:"image-dialog",attrs:{modal:!1,visible:e.picturePreviewVisible},on:{"update:visible":function(t){e.picturePreviewVisible=t}}},[a("img",{attrs:{width:"100%",src:e.ImageUrls,alt:""}})])],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注：",size:"mini",prop:"remark"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",autosize:"",clearable:"",placeholder:"请输入"},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,"remark",t)},expression:"dataForm.remark"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",loading:e.isSuccess},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("确定")])],1)],1)},M=[],E=(a("4917"),a("b562")),U=a("5723"),z=a("61f7");function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var H={data:function(){return{visible:!1,paymentAccountList:[],images:[],picturePreviewVisible:!1,ImageUrls:"",money:"",isSuccess:!1,uploadList:[],isMax:!1,pickerEnd:{disabledDate:function(e){return e.getTime()>Date.now()-864e4}},rechargeTypeSelect:[],dataForm:{paymentAccount:"",money:"",rechargeTime:"",rechargeType:"",orderCode:"",proofPath:"",remark:""},distributorId:"",dataRule:{paymentAccount:[{required:!0,message:"充值账号不能为空",trigger:"change"}],money:[{required:!0,message:"充值金额不能为空",trigger:"blur"},{validator:z["e"],trigger:"blur"}],rechargeType:[{required:!0,message:"充值类型不能为空",trigger:"blur"}],rechargeTime:[{required:!0,message:"充值时间不能为空",trigger:"change"}]}}},methods:V({},Object(g["b"])({cashRechargeData:"cashRechargeData",accountData:"accountData"}),{init:function(e){this.visible=!0,this.isMax=!1,this.distributorId=e,this.isSuccess=!1,this.getPaymentAccount(),this.getRechargeType()},getPaymentAccount:function(){var e=this;Object(U["m"])({distributorId:this.distributorId}).then((function(t){200===t.code&&t.success&&(e.paymentAccountList=t.data)}))},oninput:function(e){this.dataForm.money=e.match(/^\d*(\.?\d{0,2})/g)[0]||null},adddot:function(){this.dataForm.money&&-1===this.dataForm.money.indexOf(".")?this.dataForm.money=Object(y["a"])(this.dataForm.money):this.dataForm.money=(+this.dataForm.money).toFixed(2)},getRechargeType:function(){var e=this;Object(U["i"])({dictTypeCode:"recharge_type"}).then((function(t){200===t.code&&t.success&&(e.rechargeTypeSelect=t.data)}))},checkOrder:function(){var e=this,t=this.dataForm.orderCode;t&&Object(U["k"])({distributorId:this.distributorId,orderCode:t}).then((function(t){200===t.code&&t.success&&t.data?e.falseCode=!0:e.falseCode=!1}))},uploadSectionFile:function(e){var t=this,a=this,r=new FormData;r.append("file",e.file),Object(E["d"])(r).then((function(r){a.images.push(r.data),a.uploadList.push({uid:e.file.uid,url:r.data}),t.dataForm.proofPath=t.images,t.$refs["dataForm"]&&t.$refs["dataForm"].validateField&&t.$refs["dataForm"].validateField("proofPath")}))},changeUpload:function(e,t){t.length>=5&&(this.isMax=!0)},errorUpload:function(e,t,a){this.$message.error("上传失败"),a.length>=5?this.isMax=!0:this.isMax=!1},showModal:function(){this.$refs["dataForm"]&&this.$refs["dataForm"].resetFields&&this.$refs["dataForm"].resetFields(),this.dataForm.paymentAccount="",this.dataForm.money="",this.dataForm.rechargeTime="",this.dataForm.proofPath="",this.dataForm.remark="",this.dataForm.rechargeType="",this.dataForm.orderCode="",this.uploadList.length=0},changeRechargeType:function(){this.dataForm.orderCode=""},handlePicturePreview:function(e){this.ImageUrls=e.url,this.picturePreviewVisible=!0},handleRemoveImg:function(e,t){var a=this,r=this.uploadList,s="",o=[],i=[];r&&r.map((function(t){t.uid===e.uid&&(s=t.url),t.uid!==e.uid&&(o.push(t.url),i.push(t))})),o=o.filter((function(e){return"undefined"!=e})),this.images=o,s&&Object(E["b"])({url:s}).then((function(e){200===e.code&&e.success&&(a.uploadList=i,a.$message.success("删除成功"))})),t.length<5&&(this.isMax=!1),this.delImages=t},dataFormSubmit:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(e.falseCode||2!==e.dataForm.rechargeType){if(t){var a=e;a.isSuccess=!0;var r=Object(y["e"])(a.dataForm);r.distributorId=a.distributorId,r.proofPath=e.images.join(),r.rechargeCategory=0,Object(U["g"])(r).then((function(e){200===e.code&&e.success?(a.$message.success(e.message||"充值成功"),a.isSuccess=!1,a.visible=!1,a.images.length=0,a.cashRechargeData({distributorId:a.distributorId,rechargeCategory:0}),a.accountData({distributorId:a.distributorId})):(a.$message.success(e.message||"充值失败"),a.isSuccess=!1)}))}}else e.$message.warning("请输入正确的订单编号")}))}})},B=H,Y=(a("3f7b"),Object(p["a"])(B,N,M,!1,null,"3fcd02bc",null)),K=Y.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"新增现金扣款","close-on-click-modal":!1,visible:e.visible,"destroy-on-close":!0,width:"45%"},on:{"update:visible":function(t){e.visible=t},open:function(t){return e.showModal()}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"扣款类型：",prop:"deductType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:"请选择"},model:{value:e.dataForm.deductType,callback:function(t){e.$set(e.dataForm,"deductType",t)},expression:"dataForm.deductType"}},e._l(e.paymentAccountList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.dictName,disabled:1==e.status,value:e.dictCode}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"金额：",prop:"money"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入"},on:{blur:e.adddot},model:{value:e.dataForm.money,callback:function(t){e.$set(e.dataForm,"money",t)},expression:"dataForm.money"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注：",size:"mini",prop:"remark"}},[a("el-input",{attrs:{clearable:"",type:"textarea",autosize:"",placeholder:"请输入"},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,"remark",t)},expression:"dataForm.remark"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",loading:e.isSuccess},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("确定")])],1)],1)},W=[];function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var X={data:function(){return{visible:!1,paymentAccountList:[],isSuccess:!1,money:"",dataForm:{deductType:"",money:"",remark:""},distributorId:"",dataRule:{deductType:[{required:!0,message:"扣款类型不能为空",trigger:"blur"}],money:[{required:!0,message:"扣款金额不能为空",trigger:"blur"},{validator:this.validateMoney,trigger:"blur"}]}}},computed:Q({},Object(g["d"])({accountMsg:"account"})),mounted:function(){},methods:Q({},Object(g["b"])({cashRdeductionData:"cashRdeductionData",accountData:"accountData"}),{init:function(e){this.visible=!0,this.distributorId=e,this.isSuccess=!1,this.getdeductionType()},validateMoney:function(e,t,a){t<=this.accountMsg.accountInfo.cashTotal?a():a(new Error("请输入正确金额,当前余额是：".concat(this.accountMsg.accountInfo.cashTotal)))},adddot:function(){this.dataForm.money&&-1===this.dataForm.money.indexOf(".")?this.dataForm.money=Object(y["a"])(this.dataForm.money):this.dataForm.money=(+this.dataForm.money).toFixed(2)},getdeductionType:function(){var e=this;Object(U["i"])({dictTypeCode:"deduct_type"}).then((function(t){200===t.code&&t.success&&(e.paymentAccountList=t.data)}))},showModal:function(){this.dataForm={money:"",payType:"",orderId:"",voucher:""}},dataFormSubmit:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){var a=e;a.isSuccess=!0;var r=Object(y["e"])(a.dataForm);r.distributorId=a.distributorId,r.deductCategory=0,Object(U["e"])(r).then((function(e){200===e.code&&e.success?(a.$message.success("扣款成功"),a.isSuccess=!1,a.visible=!1,a.accountData({distributorId:a.distributorId}),a.cashRdeductionData({distributorId:a.distributorId,deductCategory:0})):(a.$message.error("扣款失败"),a.isSuccess=!1)}))}}))}})},Z=X,ee=(a("d982"),Object(p["a"])(Z,J,W,!1,null,"c81e6b5a",null)),te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"新增返利充值","close-on-click-modal":!1,visible:e.visible,"destroy-on-close":!0,width:"30%"},on:{"update:visible":function(t){e.visible=t},open:function(t){return e.showModal()}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"充值账号：",prop:"paymentAccount"}},[a("p",[e._v(e._s(e.paymentAccountList&&e.paymentAccountList[0]&&e.paymentAccountList[0].account||""))])])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"充值金额：",prop:"money"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入",clearable:""},on:{blur:e.adddot},model:{value:e.dataForm.money,callback:function(t){e.$set(e.dataForm,"money",t)},expression:"dataForm.money"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"充值类型：",prop:"rechargeType"}},[a("el-select",{staticStyle:{width:"80%"},attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:"请选择"},on:{change:e.changeRechargeType},model:{value:e.dataForm.rechargeType,callback:function(t){e.$set(e.dataForm,"rechargeType",t)},expression:"dataForm.rechargeType"}},e._l(e.rechargeTypeSelect,(function(e){return a("el-option",{key:e.dictCode,attrs:{label:e.dictName,value:e.dictCode}})})),1)],1)],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:2===e.dataForm.rechargeType,expression:"dataForm.rechargeType === 2"}],attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"充值订单编号：",prop:"orderCode",rules:[{required:2===e.dataForm.rechargeType,message:"充值订单编号不能为空",trigger:"blur"}]}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入",clearable:""},on:{blur:e.checkOrder},model:{value:e.dataForm.orderCode,callback:function(t){e.$set(e.dataForm,"orderCode",t)},expression:"dataForm.orderCode"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"充值时间：",prop:"rechargeTime"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd","picker-options":e.pickerEnd,placeholder:"选择日期"},model:{value:e.dataForm.rechargeTime,callback:function(t){e.$set(e.dataForm,"rechargeTime",t)},expression:"dataForm.rechargeTime"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"凭证：",size:"mini",prop:"proofPath"}},[a("el-upload",{class:{disabled:e.isMax},attrs:{action:"/upload/uploadFile","list-type":"picture-card","on-preview":e.handlePicturePreview,"http-request":e.uploadSectionFile,"on-change":e.changeUpload,"on-error":e.errorUpload,limit:5,"on-remove":e.handleRemoveImg}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{staticClass:"image-dialog",attrs:{modal:!1,visible:e.picturePreviewVisible},on:{"update:visible":function(t){e.picturePreviewVisible=t}}},[a("img",{attrs:{width:"100%",src:e.ImageUrls,alt:""}})])],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注：",size:"mini",prop:"remark"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",autosize:"",clearable:"",placeholder:"请输入"},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,"remark",t)},expression:"dataForm.remark"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),a("el-button",{attrs:{loading:e.isSuccess,type:"primary"},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("确定")])],1)],1)},re=[];function se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?se(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):se(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ie={data:function(){return{images:[],uploadList:[],visible:!1,voucherImg:"",paymentAccountList:[],picturePreviewVisible:!1,ImageUrls:"",isSuccess:!1,rechargeTypeSelect:[],money:"",isMax:!1,pickerEnd:{disabledDate:function(e){return e.getTime()>Date.now()-864e4}},dataForm:{money:"",rechargeType:"",orderCode:"",rechargeTime:"",proofPath:"",remark:""},distributorId:"",dataRule:{money:[{required:!0,message:"充值金额不能为空",trigger:"blur"},{validator:z["e"],trigger:"blur"}],rechargeTime:[{required:!0,message:"充值时间不能为空",trigger:"change"}],rechargeType:[{required:!0,message:"充值类型不能为空",trigger:"blur"}]}}},computed:oe({},Object(g["d"])({deptUsrt:"deptUser"})),methods:oe({},Object(g["b"])({flRechargeData:"flRechargeData",accountData:"accountData"}),{init:function(e){this.visible=!0,this.isMax=!1,this.distributorId=e,this.isSuccess=!1,this.getRechargeNumber(),this.getRechargeType()},adddot:function(){this.dataForm.money&&-1===this.dataForm.money.indexOf(".")?this.dataForm.money=Object(y["a"])(this.dataForm.money):this.dataForm.money=(+this.dataForm.money).toFixed(2)},getRechargeNumber:function(){var e=this;Object(U["o"])({distributorId:0}).then((function(t){200===t.code&&t.success&&(e.paymentAccountList=t.data)}))},uploadSectionFile:function(e){var t=this,a=new FormData;a.append("file",e.file),Object(E["d"])(a).then((function(a){t.images.push(a.data),t.uploadList.push({uid:e.file.uid,url:a.data}),t.dataForm.proofPath=t.images,t.$refs["dataForm"]&&t.$refs["dataForm"].validateField&&t.$refs["dataForm"].validateField("proofPath")}))},changeUpload:function(e,t){t.length>=5&&(this.isMax=!0)},getRechargeType:function(){var e=this;Object(U["i"])({dictTypeCode:"recharge_type"}).then((function(t){200===t.code&&t.success&&(e.rechargeTypeSelect=t.data)}))},checkOrder:function(){var e=this,t=this.dataForm.orderCode;t&&Object(U["k"])({distributorId:this.distributorId,orderCode:t}).then((function(t){200===t.code&&t.success&&t.data?e.falseCode=!0:e.falseCode=!1}))},errorUpload:function(e,t,a){this.$message.error("上传失败"),a.length>=5?this.isMax=!0:this.isMax=!1},showModal:function(){this.$refs["dataForm"]&&this.$refs["dataForm"].resetFields&&this.$refs["dataForm"].resetFields(),this.dataForm.money="",this.dataForm.rechargeTime="",this.dataForm.proofPath="",this.dataForm.remark="",this.uploadList.length=0,this.dataForm.orderCode="",this.dataForm.rechargeType=""},changeRechargeType:function(){this.dataForm.orderCode=""},handlePicturePreview:function(e){this.ImageUrls=e.url,this.picturePreviewVisible=!0},handleRemoveImg:function(e,t){var a=this,r=this.uploadList,s="",o=[],i=[];r&&r.map((function(t){t.uid===e.uid&&(s=t.url),t.uid!==e.uid&&(o.push(t.url),i.push(t))})),o=o.filter((function(e){return"undefined"!=e})),this.images=o,s&&Object(E["b"])({url:s}).then((function(e){200===e.code&&e.success&&(a.uploadList=i,a.$message.success("删除成功"))})),t.length<5&&(this.isMax=!1),this.delImages=t},dataFormSubmit:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(e.falseCode||2!==e.dataForm.rechargeType){if(t){e.isSuccess=!0;var a=e,r=Object(y["e"])(a.dataForm);r.distributorId=a.distributorId,r.proofPath=e.images.join(),r.rechargeCategory=1,r.paymentAccount=a.paymentAccountList[0].id,Object(U["g"])(r).then((function(e){200===e.code&&e.success?(a.isSuccess=!1,a.$message.success(e.message||"充值成功"),a.visible=!1,a.images.length=0,a.accountData({distributorId:a.distributorId}),a.flRechargeData({distributorId:a.distributorId,rechargeCategory:1})):(a.$message.success(e.message||"充值失败"),a.isSuccess=!1)}))}}else e.$message.warning("请输入正确的订单编号")}))}})},ne=ie,ce=(a("fa6b"),Object(p["a"])(ne,ae,re,!1,null,"4fcdde12",null)),le=ce.exports,de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"新增返利扣款","close-on-click-modal":!1,visible:e.visible,"destroy-on-close":!0,width:"45%"},on:{"update:visible":function(t){e.visible=t},open:function(t){return e.showModal()}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"扣款类型：",prop:"deductType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:"请选择"},model:{value:e.dataForm.deductType,callback:function(t){e.$set(e.dataForm,"deductType",t)},expression:"dataForm.deductType"}},e._l(e.paymentAccountList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.dictName,disabled:1==e.status,value:e.dictCode}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"金额：",prop:"money"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入"},on:{blur:e.adddot},model:{value:e.dataForm.money,callback:function(t){e.$set(e.dataForm,"money",t)},expression:"dataForm.money"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注：",size:"mini",prop:"remark"}},[a("el-input",{attrs:{clearable:"",type:"textarea",autosize:"",placeholder:"请输入"},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,"remark",t)},expression:"dataForm.remark"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",loading:e.isSuccess},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("确定")])],1)],1)},ue=[];function me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function pe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?me(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):me(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var he={data:function(){return{visible:!1,paymentAccountList:[],isSuccess:!1,money:"",dataForm:{deductType:"",money:"",remark:""},distributorId:"",dataRule:{deductType:[{required:!0,message:"扣款类型不能为空",trigger:"blur"}],money:[{required:!0,message:"充值金额不能为空",trigger:"blur"},{validator:this.validateMoney,trigger:"change"}]}}},computed:pe({},Object(g["d"])({accountMsg:"account"})),methods:pe({},Object(g["b"])({flRdeductionData:"flRdeductionData",accountData:"accountData"}),{init:function(e){this.visible=!0,this.distributorId=e,this.isSuccess=!1,this.getdeductionType()},validateMoney:function(e,t,a){t<=this.accountMsg.accountInfo.rebateTotal?a():a(new Error("请输入正确金额,当前余额是：".concat(this.accountMsg.accountInfo.rebateTotal)))},adddot:function(){this.dataForm.money&&-1===this.dataForm.money.indexOf(".")?this.dataForm.money=Object(y["a"])(this.dataForm.money):this.dataForm.money=(+this.dataForm.money).toFixed(2)},getdeductionType:function(){var e=this;Object(U["i"])({dictTypeCode:"deduct_type"}).then((function(t){200===t.code&&t.success&&(e.paymentAccountList=t.data)}))},showModal:function(){this.dataForm={money:"",payType:"",remark:""}},dataFormSubmit:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){var a=e;a.isSuccess=!0;var r=Object(y["e"])(a.dataForm);r.distributorId=a.distributorId,r.deductCategory=1,Object(U["e"])(r).then((function(e){200===e.code&&e.success?(a.$message.success("扣款成功"),a.isSuccess=!1,a.visible=!1,a.accountData({distributorId:a.distributorId}),a.flRdeductionData({distributorId:a.distributorId,deductCategory:1})):(a.$message.error("扣款失败"),a.isSuccess=!1)}))}}))}})},be=he,fe=(a("94d3"),Object(p["a"])(be,de,ue,!1,null,"2fc21720",null)),ge=fe.exports,ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("span",{staticClass:"search-year"},[e._v("查询年份：")]),a("el-select",{staticClass:"year",attrs:{placeholder:"请选择年份"},on:{change:e.changeYear},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.key}})})),1),a("div",{staticClass:"month-box"},[e._l(e.months,(function(t,r){return[a("el-tag",{key:r,staticClass:"month",class:{activetag:t.id},attrs:{effect:"plain"},on:{click:function(a){return e.handleMonth(t)}}},[a("span",[e._v(e._s(t.statementDate)),a("span",{staticClass:"status-name"},[e._v(e._s(t.statusName))])])])]}))],2)],1)},ve=[],we=a("01ea"),Oe={data:function(){return{months:[],year:we["a"].ACCOUNT_SEARCH_YEAR[1].key,options:we["a"].ACCOUNT_SEARCH_YEAR}},computed:{},mounted:function(){this.getMonthList()},methods:{handleMonth:function(e){e.id&&this.$router.push({path:"/month/reconciliation",query:{id:e.id,label:e.statementDate}})},getMonthList:function(){var e=this;Object(U["d"])({distributorId:this.$route.params.id,statementDate:this.year}).then((function(t){200===t.code&&t.success&&(e.months=t.data)}))},changeYear:function(e){this.getMonthList()}}},De=Oe,_e=(a("7ed1"),Object(p["a"])(De,ye,ve,!1,null,"72e3a88a",null)),Fe=_e.exports,ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{staticStyle:{"margin-bottom":"4px"},attrs:{type:"primary",icon:"el-icon-plus",size:"mini",plain:""},on:{click:e.addAccount}},[e._v("新增")]),a("el-table",{attrs:{data:e.accountState.paymentAccountList,"highlight-current-row":"",border:"","header-cell-style":{"background-color":"#f0f0f0"}}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((e.rechargePage.current-1)*e.rechargePage.size+t.$index+1))])]}}])}),a("el-table-column",{attrs:{property:"accountTypeName",label:"账号类型"}}),a("el-table-column",{attrs:{property:"accountHolder",label:"持有者"}}),a("el-table-column",{attrs:{property:"account",label:"账号"}}),a("el-table-column",{attrs:{property:"corporateTypeName",label:"对公类型"}}),a("el-table-column",{attrs:{property:"createTime",label:"创建时间"}}),a("el-table-column",{attrs:{property:"createUserName",label:"创建人"}}),a("el-table-column",{attrs:{property:"opt",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-edit"},on:{click:function(a){return e.edit(t.row)}}},[e._v("编辑")])]}}])})],1),a("AddAccountNumber",{ref:"addaccountnumberDom"}),a("EditAccountNumber",{ref:"editaccountnumberDom"})],1)},je=[],Te=(a("28a5"),a("31f2")),Ce=a("7b02");function xe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Pe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $e={components:{AddAccountNumber:Te["a"],EditAccountNumber:Ce["a"]},data:function(){return{dataSource:[],rechargePage:{size:20,current:1}}},computed:Pe({},Object(g["d"])({accountState:"account"})),watch:{$route:function(e,t){5===e.path.split("/").length&&this.getDataList()}},mounted:function(){this.getDataList()},methods:Pe({},Object(g["b"])({paymentAccountData:"paymentAccountData"}),{getDataList:function(){var e=this.$route.params.id;this.paymentAccountData({distributorId:e})},edit:function(e){var t=this;this.$refs.editaccountnumberDom.visible=!0,this.$nextTick((function(){t.$refs.editaccountnumberDom.init(e.id,e.distributorId)}))},addAccount:function(){var e=this;this.$refs.addaccountnumberDom.visible=!0,this.$nextTick((function(){e.$refs.addaccountnumberDom.init(e.$route.params.id)}))}})},Se=$e,Ie=(a("ecbe"),Object(p["a"])(Se,ke,je,!1,null,"c6572498",null)),Re=Ie.exports,Le=a("f19e");function Ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ae(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Me={components:{cashRecharge:K,cashDeduction:te,FanliRecharge:le,FanliDeduction:ge,Reconciliation:Fe,rechargeAccount:Re,AddAccountNumber:Te["a"],totalMoney:Le["a"]},data:function(){return{cashRechargeTime:"",cashDeductTime:"",rebateRechargeTime:"",rebateDeductTime:"",activeCashTabName:"cash",activeCashChildTabName:"recharge",activeFanliTabName:"recharge",distributorPropsId:"",activeTabName:"fundTab",activeChildTabName:"cash",rechargePage:{size:20,current:1},rebatePage:{size:20,current:1},cashDeductList:[],rebateDeductList:[],rebateRechargeList:[],dataInfo:{cashTotal:"",rebateTotal:"",cashRechargeAccumulate:"",cashDeductAccumulate:"",rebateDeductAccumulate:"",rebateRechargeAccumulate:"",rebateAvailable:"",distributorName:""}}},watch:{$route:function(e,t){this.getAccountsDetail()}},computed:Ne({},Object(g["d"])({accountState:"account",accountDatas:"dealer"})),mounted:function(){this.getAccountsDetail(),this.getCashRechargeList(),this.getCashDeductList(),this.getRebateList(),this.getRebatehDeductList()},methods:Ne({},Object(g["b"])({cashRechargeData:"cashRechargeData",cashRdeductionData:"cashRdeductionData",flRechargeData:"flRechargeData",flRdeductionData:"flRdeductionData",accountData:"accountData"}),{getCashRechargeList:function(){var e={};this.cashRechargeTime&&(e.startDate=this.cashRechargeTime[0],e.endDate=this.cashRechargeTime[1]),e.rechargeCategory=0,e.distributorId=this.$route.params.id,this.cashRechargeData(e)},getCashDeductList:function(){var e={};this.cashDeductTime&&(e.startDate=this.cashDeductTime[0],e.endDate=this.cashDeductTime[1]),e.distributorId=this.$route.params.id,e.deductCategory=0,this.cashRdeductionData(e)},getRebateList:function(){var e={};this.rebateRechargeTime&&(e.startDate=this.rebateRechargeTime[0],e.endDate=this.rebateRechargeTime[1]),e.distributorId=this.$route.params.id,e.rechargeCategory=1,this.flRechargeData(e)},getRebatehDeductList:function(){var e={};this.rebateDeductTime&&(e.startDate=this.rebateDeductTime[0],e.endDate=this.rebateDeductTime[1]),e.distributorId=this.$route.params.id,e.deductCategory=1,this.flRdeductionData(e)},changeCashRechargeTime:function(e){this.getCashRechargeList()},changeCashDeductTime:function(e){this.getCashDeductList()},changeRebateRechargeTime:function(e){this.getRebateList()},changeRebateDeductTime:function(e){this.getRebatehDeductList()},addCashHandle:function(){var e=this;Object(U["m"])({distributorId:this.$route.params.id}).then((function(t){200===t.code&&t.success&&(t.data.length?(e.$refs.cashrechargeDom.visible=!0,e.$nextTick((function(){e.$refs.cashrechargeDom.init(e.$route.params.id)}))):e.$confirm("暂无可用充值的账号，请先创建充值账号, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$refs.addaccountnumberDom.visible=!0,e.$nextTick((function(){e.$refs.addaccountnumberDom.init(e.$route.params.id)}))})))}))},addDeductionHandle:function(){var e=this;this.$refs.cashdeductionDom.visible=!0,this.$nextTick((function(){e.$refs.cashdeductionDom.init(e.$route.params.id)}))},addCashFanliHandle:function(){var e=this;this.$refs.fanliRechargeDom.visible=!0,this.$nextTick((function(){e.$refs.fanliRechargeDom.init(e.$route.params.id)}))},addDeductionFanliHandle:function(){var e=this;this.$refs.fanlideductionDom.visible=!0,this.$nextTick((function(){e.$refs.fanlideductionDom.init(e.$route.params.id)}))},getAccountsDetail:function(){this.accountData({distributorId:this.$route.params.id})}})},Ee=Me,Ue=(a("2a6f"),Object(p["a"])(Ee,L,A,!1,null,"2f6d1cf8",null)),ze=Ue.exports,qe={components:{DealerDept:k,DealerInfo:R,AccountInfo:ze},data:function(){return{activeName:"first",areaName:""}},methods:{handleClick:function(e,t){},areaInfo:function(e){this.areaName=e}}},Ve=qe,He=(a("271d"),Object(p["a"])(Ve,r,s,!1,null,"72b8afb3",null));t["default"]=He.exports},1575:function(e,t,a){},"158e":function(e,t,a){},"1c82":function(e,t,a){},"271d":function(e,t,a){"use strict";var r=a("1c82"),s=a.n(r);s.a},"2a6f":function(e,t,a){"use strict";var r=a("058a"),s=a.n(r);s.a},"39f3":function(e,t,a){},"3f7b":function(e,t,a){"use strict";var r=a("158e"),s=a.n(r);s.a},"4a4c":function(e,t,a){},"5ec5":function(e,t,a){},7633:function(e,t,a){},"7ed1":function(e,t,a){"use strict";var r=a("9b9a"),s=a.n(r);s.a},"94d3":function(e,t,a){"use strict";var r=a("4a4c"),s=a.n(r);s.a},"9b9a":function(e,t,a){},ab8b:function(e,t,a){},bcd9:function(e,t,a){"use strict";var r=a("1575"),s=a.n(r);s.a},cebc:function(e,t,a){"use strict";var r=a("39f3"),s=a.n(r);s.a},d982:function(e,t,a){"use strict";var r=a("7633"),s=a.n(r);s.a},ecbe:function(e,t,a){"use strict";var r=a("5ec5"),s=a.n(r);s.a},efe8:function(e,t,a){"use strict";var r=a("ab8b"),s=a.n(r);s.a},fa6b:function(e,t,a){"use strict";var r=a("fca5"),s=a.n(r);s.a},fca5:function(e,t,a){}}]);