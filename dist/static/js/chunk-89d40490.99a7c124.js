(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-89d40490"],{"50e8":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"新增返利充值","close-on-click-modal":!1,visible:e.visible,"destroy-on-close":!0,width:"30%"},on:{"update:visible":function(t){e.visible=t},open:function(t){return e.showModal()}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"充值账号："}},[a("p",[e._v(e._s(e.paymentAccountList&&e.paymentAccountList[0]&&e.paymentAccountList[0].account||""))])])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"充值金额：",prop:"money"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入",clearable:""},on:{blur:e.adddot},model:{value:e.dataForm.money,callback:function(t){e.$set(e.dataForm,"money",t)},expression:"dataForm.money"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"充值类型：",prop:"rechargeType"}},[a("el-select",{staticStyle:{width:"80%"},attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:"请选择"},on:{change:e.changeRechargeType},model:{value:e.dataForm.rechargeType,callback:function(t){e.$set(e.dataForm,"rechargeType",t)},expression:"dataForm.rechargeType"}},e._l(e.rechargeTypeSelect,(function(e){return a("el-option",{key:e.dictCode,attrs:{label:e.dictName,value:e.dictCode}})})),1)],1)],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:2===e.dataForm.rechargeType,expression:"dataForm.rechargeType === 2"}],attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"充值订单编号：",prop:"orderCode",rules:[{required:2===e.dataForm.rechargeType,message:"充值订单编号不能为空",trigger:"blur"}]}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入",clearable:""},on:{blur:e.checkOrder},model:{value:e.dataForm.orderCode,callback:function(t){e.$set(e.dataForm,"orderCode",t)},expression:"dataForm.orderCode"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"充值时间：",prop:"rechargeTime"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd","picker-options":e.pickerEnd,placeholder:"选择日期"},model:{value:e.dataForm.rechargeTime,callback:function(t){e.$set(e.dataForm,"rechargeTime",t)},expression:"dataForm.rechargeTime"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"凭证：",size:"mini",prop:"proofPath"}},[a("el-upload",{class:{disabled:e.isMax},attrs:{action:"/upload/uploadFile","list-type":"picture-card","on-preview":e.handlePicturePreview,"http-request":e.uploadSectionFile,"on-change":e.changeUpload,"on-error":e.errorUpload,limit:5,"on-remove":e.handleRemoveImg}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{staticClass:"image-dialog",attrs:{modal:!1,visible:e.picturePreviewVisible},on:{"update:visible":function(t){e.picturePreviewVisible=t}}},[a("img",{attrs:{width:"100%",src:e.ImageUrls,alt:""}})])],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注：",size:"mini",prop:"remark"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",autosize:"",clearable:"",placeholder:"请输入"},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,"remark",t)},expression:"dataForm.remark"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),a("el-button",{attrs:{loading:e.isSuccess,type:"primary"},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("确定")])],1)],1)},o=[],i=(a("8e6e"),a("ac6a"),a("cadf"),a("456d"),a("bd86")),s=a("fa7d"),c=a("2f62"),n=a("b562"),l=a("5723"),d=a("61f7");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={data:function(){return{images:[],uploadList:[],visible:!1,voucherImg:"",paymentAccountList:[],picturePreviewVisible:!1,ImageUrls:"",isSuccess:!1,rechargeTypeSelect:[],money:"",isMax:!1,pickerEnd:{disabledDate:function(e){return e.getTime()>Date.now()-864e4}},falseCode:!0,dataForm:{money:"",rechargeType:"",orderCode:"",pageId:"",rechargeTime:"",proofPath:"",remark:""},distributorId:"",dataRule:{money:[{required:!0,message:"充值金额不能为空",trigger:"blur"},{validator:d["d"],trigger:"blur"}],rechargeTime:[{required:!0,message:"充值时间不能为空",trigger:"change"}],rechargeType:[{required:!0,message:"充值类型不能为空",trigger:"blur"}]}}},computed:m({},Object(c["d"])({queryData:"queryCondition"})),methods:m({},Object(c["b"])({flRechargeData:"flRechargeData",accountDetailData:"accountDetailData",accountPageData:"accountPageData"}),{init:function(e,t){this.visible=!0,this.isMax=!1,this.distributorId=e,this.pageId=t,this.isSuccess=!1,this.getRechargeNumber(),this.getRechargeType()},adddot:function(){this.dataForm.money&&-1===this.dataForm.money.indexOf(".")?this.dataForm.money=Object(s["a"])(this.dataForm.money):this.dataForm.money=(+this.dataForm.money).toFixed(2)},getRechargeNumber:function(){var e=this;Object(l["o"])({distributorId:0}).then((function(t){200===t.code&&t.success&&(e.paymentAccountList=t.data)}))},getRechargeType:function(){var e=this;Object(l["i"])({dictTypeCode:"recharge_type"}).then((function(t){200===t.code&&t.success&&(e.rechargeTypeSelect=t.data)}))},checkOrder:function(){var e=this,t=this.dataForm.orderCode;t&&Object(l["k"])({distributorId:this.distributorId,orderCode:t}).then((function(t){200===t.code&&t.success&&t.data?e.falseCode=!0:e.falseCode=!1}))},uploadSectionFile:function(e){var t=this,a=new FormData;a.append("file",e.file),Object(n["d"])(a).then((function(a){t.images.push(a.data),t.uploadList.push({uid:e.file.uid,url:a.data}),t.dataForm.proofPath=t.images,t.$refs["dataForm"]&&t.$refs["dataForm"].validateField&&t.$refs["dataForm"].validateField("proofPath")}))},changeUpload:function(e,t){t.length>=5&&(this.isMax=!0)},errorUpload:function(e,t,a){this.$message.error("上传失败"),a.length>=5?this.isMax=!0:this.isMax=!1},showModal:function(){this.$refs["dataForm"]&&this.$refs["dataForm"].resetFields&&this.$refs["dataForm"].resetFields(),this.dataForm.money="",this.dataForm.rechargeTime="",this.dataForm.proofPath="",this.dataForm.remark="",this.uploadList.length=0,this.dataForm.rechargeType="",this.dataForm.orderCode=""},changeRechargeType:function(){this.dataForm.orderCode=""},handlePicturePreview:function(e){this.ImageUrls=e.url,this.picturePreviewVisible=!0},handleRemoveImg:function(e,t){var a=this,r=this.uploadList,o="",i=[],s=[];r&&r.map((function(t){t.uid===e.uid&&(o=t.url),t.uid!==e.uid&&(i.push(t.url),s.push(t))})),i=i.filter((function(e){return"undefined"!=e})),this.images=i,o&&Object(n["b"])({url:o}).then((function(e){200===e.code&&e.success&&(a.uploadList=s,a.$message.success("删除成功"))})),t.length<5&&(this.isMax=!1),this.delImages=t},dataFormSubmit:function(){var e=this,t=Object(s["k"])(this.queryData.query.account.pagination,Object(s["l"])(this.queryData.query.account.dataForm));this.$refs["dataForm"].validate((function(a){if(e.falseCode||2!==e.dataForm.rechargeType){if(a){e.isSuccess=!0;var r=e,o=Object(s["e"])(r.dataForm);o.distributorId=r.distributorId,o.paymentAccount=r.paymentAccountList[0].id,o.proofPath=e.images.join(),o.rechargeCategory=1,Object(l["g"])(o).then((function(e){200===e.code&&e.success?(r.isSuccess=!1,r.$message.success(e.message||"充值成功"),r.visible=!1,r.images.length=0,r.accountDetailData({id:r.pageId}),r.flRechargeData({distributorId:r.distributorId,rechargeCategory:1}),r.accountPageData(t)):(r.$message.success(e.message||"充值失败"),r.isSuccess=!1)}))}}else e.$message.warning("请输入正确的订单编号")}))}})},p=h,g=(a("bc20"),a("2877")),f=Object(g["a"])(p,r,o,!1,null,"3e08166c",null);t["a"]=f.exports},"57c9":function(e,t,a){},"90b5":function(e,t,a){"use strict";var r=a("57c9"),o=a.n(r);o.a},bb24:function(e,t,a){},bc20:function(e,t,a){"use strict";var r=a("bb24"),o=a.n(r);o.a},cd63:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"新增现金充值","close-on-click-modal":!1,visible:e.visible,"destroy-on-close":!0,width:"30%"},on:{"update:visible":function(t){e.visible=t},open:function(t){return e.showModal()}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"充值账号：",prop:"paymentAccount"}},[a("el-select",{staticStyle:{width:"80%"},attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:0==e.paymentAccountList.length?"请先创建充值账号":"请选择"},model:{value:e.dataForm.paymentAccount,callback:function(t){e.$set(e.dataForm,"paymentAccount",t)},expression:"dataForm.paymentAccount"}},e._l(e.paymentAccountList,(function(e){return a("el-option",{key:e.id,attrs:{label:"【"+e.accountHolder+"-"+e.accountTypeName+"】"+e.account,disabled:1==e.status,value:e.id}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"充值金额：",prop:"money"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入",clearable:""},on:{blur:e.adddot},model:{value:e.dataForm.money,callback:function(t){e.$set(e.dataForm,"money",t)},expression:"dataForm.money"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"充值类型：",prop:"rechargeType"}},[a("el-select",{staticStyle:{width:"80%"},attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:"请选择"},on:{change:e.changeRechargeType},model:{value:e.dataForm.rechargeType,callback:function(t){e.$set(e.dataForm,"rechargeType",t)},expression:"dataForm.rechargeType"}},e._l(e.rechargeTypeSelect,(function(e){return a("el-option",{key:e.dictCode,attrs:{label:e.dictName,value:e.dictCode}})})),1)],1)],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:2===e.dataForm.rechargeType,expression:"dataForm.rechargeType === 2"}],attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"充值订单编号：",prop:"orderCode",rules:[{required:2===e.dataForm.rechargeType,message:"充值订单编号不能为空",trigger:"blur"}]}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入",clearable:""},on:{blur:e.checkOrder},model:{value:e.dataForm.orderCode,callback:function(t){e.$set(e.dataForm,"orderCode",t)},expression:"dataForm.orderCode"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"充值时间：",prop:"rechargeTime"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd","picker-options":e.pickerEnd,placeholder:"选择日期"},model:{value:e.dataForm.rechargeTime,callback:function(t){e.$set(e.dataForm,"rechargeTime",t)},expression:"dataForm.rechargeTime"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"凭证：",size:"mini",prop:"proofPath"}},[a("el-upload",{class:{disabled:e.isMax},attrs:{action:"/upload/uploadFile","list-type":"picture-card","on-preview":e.handlePicturePreview,"http-request":e.uploadSectionFile,"on-change":e.changeUpload,"on-error":e.errorUpload,"on-remove":e.handleRemoveImg}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{staticClass:"image-dialog",attrs:{visible:e.picturePreviewVisible,modal:!1},on:{"update:visible":function(t){e.picturePreviewVisible=t}}},[a("img",{attrs:{width:"100%",src:e.ImageUrls,alt:""}})])],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注：",size:"mini",prop:"remark"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",autosize:"",clearable:"",placeholder:"请输入"},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,"remark",t)},expression:"dataForm.remark"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",loading:e.isSuccess},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("确定")])],1)],1)},o=[],i=(a("8e6e"),a("ac6a"),a("cadf"),a("456d"),a("4917"),a("bd86")),s=a("fa7d"),c=a("2f62"),n=a("b562"),l=a("5723"),d=a("61f7");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={data:function(){return{visible:!1,paymentAccountList:[],images:[],uploadList:[],picturePreviewVisible:!1,ImageUrls:"",money:"",isSuccess:!1,isMax:!1,pageId:"",falseCode:!0,delImages:[],pickerEnd:{disabledDate:function(e){return e.getTime()>Date.now()-864e4}},rechargeTypeSelect:[],dataForm:{paymentAccount:"",money:"",rechargeType:"",orderCode:"",rechargeTime:"",proofPath:"",remark:""},distributorId:"",dataRule:{paymentAccount:[{required:!0,message:"充值账号不能为空",trigger:"change"}],money:[{required:!0,message:"充值金额不能为空",trigger:"blur"},{validator:d["e"],trigger:"blur"}],rechargeType:[{required:!0,message:"充值类型不能为空",trigger:"blur"}],rechargeTime:[{required:!0,message:"充值时间不能为空",trigger:"change"}]}}},computed:m({},Object(c["d"])({queryData:"queryCondition"})),methods:m({},Object(c["b"])({cashRechargeData:"cashRechargeData",accountDetailData:"accountDetailData",accountPageData:"accountPageData"}),{init:function(e,t){this.visible=!0,this.isMax=!1,this.distributorId=e,this.pageId=t,this.isSuccess=!1,this.getPaymentAccount(),this.getRechargeType()},getPaymentAccount:function(){var e=this;Object(l["m"])({distributorId:this.distributorId}).then((function(t){200===t.code&&t.success&&(e.paymentAccountList=t.data)}))},oninput:function(e){this.dataForm.money=e.match(/^\d*(\.?\d{0,2})/g)[0]||null},getRechargeType:function(){var e=this;Object(l["i"])({dictTypeCode:"recharge_type"}).then((function(t){200===t.code&&t.success&&(e.rechargeTypeSelect=t.data)}))},checkOrder:function(){var e=this,t=this.dataForm.orderCode;t&&Object(l["k"])({distributorId:this.distributorId,orderCode:t}).then((function(t){200===t.code&&t.success&&t.data?e.falseCode=!0:e.falseCode=!1}))},adddot:function(){this.dataForm.money&&-1===this.dataForm.money.indexOf(".")?this.dataForm.money=Object(s["a"])(this.dataForm.money):this.dataForm.money=(+this.dataForm.money).toFixed(2)},changeUpload:function(e,t){t.length>=5&&(this.isMax=!0)},errorUpload:function(e,t,a){this.$message.error("上传失败"),a.length>=5?this.isMax=!0:this.isMax=!1},showModal:function(){this.$refs["dataForm"]&&this.$refs["dataForm"].resetFields&&this.$refs["dataForm"].resetFields(),this.dataForm.paymentAccount="",this.dataForm.money="",this.dataForm.rechargeTime="",this.dataForm.proofPath="",this.dataForm.remark="",this.dataForm.rechargeType="",this.dataForm.orderCode="",this.uploadList.length=0},changeRechargeType:function(){this.dataForm.orderCode=""},handlePicturePreview:function(e){this.ImageUrls=e.url,this.picturePreviewVisible=!0},uploadSectionFile:function(e){var t=this,a=this,r=new FormData;r.append("file",e.file),Object(n["d"])(r).then((function(r){a.images.push(r.data),a.uploadList.push({uid:e.file.uid,url:r.data}),t.dataForm.proofPath=t.images,t.$refs["dataForm"]&&t.$refs["dataForm"].validateField&&t.$refs["dataForm"].validateField("proofPath")}))},handleRemoveImg:function(e,t){var a=this,r=this.uploadList,o="",i=[],s=[];r&&r.map((function(t){t.uid===e.uid&&(o=t.url),t.uid!==e.uid&&(i.push(t.url),s.push(t))})),i=i.filter((function(e){return"undefined"!==e})),this.images=i,o&&Object(n["b"])({url:o}).then((function(e){200===e.code&&e.success&&(a.uploadList=s,a.$message.success("删除成功"))})),t.length<5&&(this.isMax=!1),this.delImages=t},dataFormSubmit:function(){var e=this,t=Object(s["k"])(this.queryData.query.account.pagination,Object(s["l"])(this.queryData.query.account.dataForm));this.$refs["dataForm"].validate((function(a){if(e.falseCode||2!==e.dataForm.rechargeType){if(a){var r=e;r.isSuccess=!0;var o=Object(s["e"])(r.dataForm);o.distributorId=r.distributorId,o.proofPath=e.images.join(),o.rechargeCategory=0,Object(l["g"])(o).then((function(e){200===e.code&&e.success?(r.$message.success(e.message||"充值成功"),r.visible=!1,r.isSuccess=!1,r.images.length=0,r.cashRechargeData({distributorId:r.distributorId,rechargeCategory:0}),r.accountDetailData({id:r.pageId}),r.accountPageData(t)):(r.isSuccess=!1,r.$message.error(e.message||"充值失败"))}))}}else e.$message.warning("请输入正确的订单编号")}))}})},p=h,g=(a("90b5"),a("2877")),f=Object(g["a"])(p,r,o,!1,null,"050dbb19",null);t["a"]=f.exports}}]);