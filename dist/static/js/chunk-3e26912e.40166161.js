(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e26912e"],{"2b7b":function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"notice-container"},[r("el-dialog",{attrs:{title:"使用帮助",visible:t.dialogVisible,width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("el-form",{ref:"dataForm",attrs:{model:t.DetaildataForm,"label-width":"100px"}},[r("div",{staticClass:"title-box"},[r("h2",[t._v(t._s(t.DetaildataForm.title))]),r("p",{directives:[{name:"show",rawName:"v-show",value:t.DetaildataForm.releaseTime,expression:"DetaildataForm.releaseTime"}],staticClass:"notice-date"},[t._v("更新时间："+t._s(t.DetaildataForm.releaseTime))])]),r("mavon-editor",{attrs:{subfield:!1,scrollStyle:!0,defaultOpen:"preview",toolbars:{navigation:!0},value:t.DetaildataForm.content}})],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("知道了")])],1)],1)],1)},i=[],o=(r("8e6e"),r("ac6a"),r("cadf"),r("456d"),r("bd86")),s=(r("a481"),r("b2d8")),l=(r("64e1"),r("61f7")),n=r("fa7d"),c=r("6967");function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){Object(o["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var p={components:{mavonEditor:s["mavonEditor"]},props:["lookId"],data:function(){return{dialogVisible:!1,selectDistributors:"",html:"",DetaildataForm:{title:"",releaseTime:"",content:""}}},methods:{init:function(t){var e=this;this.dialogVisible=!0,Object(c["d"])(t).then((function(t){var r=t.content.replace(/& /gi,"&"),a=t,i=Object(n["m"])(a,["title","content","releaseTime"]);i.content=Object(l["a"])(r),e.DetaildataForm=d({},i)}))}}},b=p,m=(r("c2b2"),r("2877")),f=Object(m["a"])(b,a,i,!1,null,"25df17e8",null);e["a"]=f.exports},"47fd":function(t,e,r){"use strict";var a={scrollPanel:{scrollingX:!1},bar:{hoverStyle:!0,onlyShowBarOnScroll:!1,background:"#ccc",scrollingX:!1,initialScrollX:!1,size:"5px"},rail:{}};e["a"]=a},"5c967":function(t,e,r){"use strict";var a=r("a5d6"),i=r.n(a);i.a},a5d6:function(t,e,r){},b562:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"d",(function(){return o})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return l}));var a=r("b775");function i(t){return Object(a["a"])({url:"/areaCode/list",method:"get",params:t})}function o(t){return Object(a["a"])({url:"/upload/uploadFile",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/upload/deleteFile",method:"delete",params:t})}function l(t){return Object(a["a"])({url:"/dict/list",method:"get",params:t})}},c2b2:function(t,e,r){"use strict";var a=r("d753"),i=r.n(a);i.a},d753:function(t,e,r){},fff7:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("vue-scroll",{attrs:{ops:t.scrollops}},[r("div",{staticClass:"notice-container"},[r("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"100px"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{staticClass:"sort",attrs:{label:"分类:",prop:"type"}},[r("el-radio-group",{model:{value:t.dataForm.type,callback:function(e){t.$set(t.dataForm,"type",e)},expression:"dataForm.type"}},[r("el-radio",{attrs:{label:"1"}},[t._v("总部")]),r("el-radio",{attrs:{label:"2"}},[t._v("经销商")])],1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"发布日期:",prop:"publicTime"}},[r("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:t.dataForm.publicTime,callback:function(e){t.$set(t.dataForm,"publicTime",e)},expression:"dataForm.publicTime"}})],1)],1)],1),"2"===t.dataForm.type?r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{staticClass:"sort",attrs:{label:"经销商:"}},[r("el-radio-group",{model:{value:t.checkDistributors,callback:function(e){t.checkDistributors=e},expression:"checkDistributors"}},[r("el-radio",{attrs:{label:"1"}},[t._v("全部")]),r("el-radio",{attrs:{label:"2"}},[t._v("指定")])],1)],1)],1)],1):t._e(),r("el-row",{directives:[{name:"show",rawName:"v-show",value:"2"===t.checkDistributors&&"2"===t.dataForm.type,expression:"checkDistributors === '2' && dataForm.type === '2'"}],attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",[r("el-select",{staticClass:"width-all",attrs:{multiple:"",filterable:"",clearable:"","loading-text":"搜索中...","default-first-option":"",placeholder:"请选择指定经销商"},model:{value:t.selectDistributors,callback:function(e){t.selectDistributors=e},expression:"selectDistributors"}},t._l(t.distributor.userList,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name+" 【"+t.areaName+"】",disabled:1===t.status,value:t.id}})})),1)],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"标题:",prop:"title"}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:t.dataForm.title,callback:function(e){t.$set(t.dataForm,"title",e)},expression:"dataForm.title"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{staticClass:"mavon-editors",attrs:{label:"内容:",prop:"content"}},[r("mavon-editor",{ref:"md",attrs:{value:t.dataForm.content},on:{imgAdd:t.addImages,change:t.changeContent}})],1)],1),r("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.showHelpTip,expression:"showHelpTip"}],staticClass:"item",staticStyle:{position:"absolute"},attrs:{effect:"dark",content:"使用帮助",placement:"top-start"}},[r("el-button",{attrs:{type:"info",circle:""},on:{click:t.gethelpDetail}},[t._v("？")])],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"公告状态：",size:"mini",prop:"status"}},[r("el-radio-group",{model:{value:t.dataForm.status,callback:function(e){t.$set(t.dataForm,"status",e)},expression:"dataForm.status"}},[r("el-radio",{attrs:{label:"0"}},[t._v("有效")]),r("el-radio",{attrs:{label:"1"}},[t._v("无效")])],1)],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-position"},on:{click:function(e){return t.dataFormSubmit("dataForm")}}},[t._v("保存")])],1)],1)],1)],1),t.helpDialogVisible?r("Help-dialog",{ref:"helpDetailDom"}):t._e()],1)])},i=[],o=(r("8e6e"),r("cadf"),r("456d"),r("6b54"),r("ac6a"),r("a481"),r("bd86")),s=r("47fd"),l=r("0bb4"),n=r("b562"),c=r("fa7d"),u=r("2f62"),d=r("b2d8"),p=(r("64e1"),r("61f7")),b=r("2b7b");function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){Object(o["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var g={props:["dept","editdept"],components:{mavonEditor:d["mavonEditor"],HelpDialog:b["a"]},data:function(){return{scrollops:s["a"],showHelpTip:!0,helpDialogVisible:!1,managerList:[],visible:!0,dataForm:{title:"",status:"0",type:"1",publicTime:"",content:""},selectDistributors:"",checkDistributors:"1",html:"",dataRule:{title:[{required:!0,message:"标题不能为空",trigger:"blur"}],publicTime:[{required:!0,message:"发布时间不能为空",trigger:"blur"}],status:[{required:!0,message:"状态不能为空",trigger:"blur"}],platform:[{required:!0,message:"系统分类不能为空",trigger:"blur"}]}}},computed:f({},Object(u["d"])({distributor:"distributor"})),mounted:function(){var t=this;this.getDistributorList({size:1e4});var e=this.$route.params.id;e&&Object(l["c"])({id:e}).then((function(e){t.showHelpTip=!1;var r=e.data.content.replace(/& /gi,"&"),a=e.data,i=Object(c["m"])(a,["title","content","status","type","publicTime"]);a.distributorList.length&&(t.checkDistributors="2",a.distributorList.forEach((function(e){t.selectDistributors.push(e.distributorId)}))),i.status=i.status.toString(),i.content=Object(p["a"])(r),i.type=i.type.toString(),t.dataForm=f({},i)}))},methods:f({},Object(u["c"])({closeCurrentPage:"CLOSE_CURRENT_PAGE"}),{},Object(u["b"])({getNoticeList:"getNoticeList",getDistributorList:"getDistributorList"}),{gethelpDetail:function(){var t=this;this.helpDialogVisible=!0,this.$nextTick((function(){t.$refs.helpDetailDom.init("Z-YWGG-0001")}))},addImages:function(t,e){var r=this,a=new FormData;a.append("file",e),a.append("type",1),Object(n["d"])(a).then((function(e){if(200===e.code&&e.success){var a=e.data;r.$refs.md.$img2Url(t,a)}}))},changeContent:function(t,e){this.html=t},dataFormSubmit:function(){var t=this,e=this;this.$refs["dataForm"].validate((function(r){if(r){"2"===t.checkDistributors&&"2"===t.dataForm.type||(t.selectDistributors="");var a=e.dataForm;a.content=e.html,a.platform="1",e.selectDistributors.length&&(a.distributorIds=e.selectDistributors.toString()),t.$route.params.id?(a.id=t.$route.params.id,Object(l["b"])(a).then((function(r){200===r.code&&r.success?(t.$message.success("编辑成功"),t.closeCurrentPage(t.$route.fullPath),t.$router.push("/business/notice")):e.$message.error(r.data.message||"编辑失败")}))):Object(l["a"])(a).then((function(r){200===r.code&&r.success?(t.$message.success("新增成功"),t.closeCurrentPage(t.$route.fullPath),t.$router.push("/business/notice")):e.$message.error(r.data.message||"新增失败")}))}}))}})},h=g,v=(r("5c967"),r("2877")),O=Object(v["a"])(h,a,i,!1,null,"67657076",null);e["default"]=O.exports}}]);