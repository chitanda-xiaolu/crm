(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-604131e1"],{"0755":function(t,e,s){},"47fd":function(t,e,s){"use strict";var i={scrollPanel:{scrollingX:!1},bar:{hoverStyle:!0,onlyShowBarOnScroll:!1,background:"#ccc",scrollingX:!1,initialScrollX:!1,size:"5px"},rail:{}};e["a"]=i},c126:function(t,e,s){"use strict";var i=s("0755"),a=s.n(i);a.a},da93:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main-box dis-flex-row"},[s("div",{staticClass:"main-box-left"},[s("el-tabs",{staticClass:"tabs-container",on:{"tab-click":t.changeLeftTabs},model:{value:t.activeLeft,callback:function(e){t.activeLeft=e},expression:"activeLeft"}},[s("el-tab-pane",{staticClass:"tabs-item",attrs:{label:"总部",name:"dept"}},[s("div",{staticClass:"page-list-left"},t._l(t.postsList,(function(e){return s("div",{key:e.roleId,staticClass:"list-item is-hover-current",class:{active:e.name===t.clickItem},on:{click:function(s){return t.changePostsNode(e.name,e.roleId)}}},[s("span",{staticClass:"list-item-left text-ellipsis",class:{greytxt:1===e.status}},[t._v(t._s(e.name))]),s("el-button",{staticClass:"list-item-right is-visibility",attrs:{plain:"",size:"mini",type:"warning"},on:{click:function(s){return t.addOrUpdateHandle(e.roleId)}}},[s("i",{staticClass:"el-icon-edit"}),t._v("编辑")])],1)})),0)]),s("el-tab-pane",{staticClass:"tabs-item",attrs:{label:"经销商",name:"distributor"}},[s("div",{staticClass:"page-list-left"},t._l(t.postsList,(function(e){return s("div",{key:e.roleId,staticClass:"list-item is-hover-current",class:{active:e.name===t.clickItem},on:{click:function(s){return t.changePostsNode(e.name,e.roleId)}}},[s("div",{staticClass:"list-item-left text-ellipsis",class:{greytxt:1===e.status}},[t._v(t._s(e.name))]),s("el-button",{staticClass:"list-item-right is-visibility",attrs:{plain:"",size:"mini",type:"warning"},on:{click:function(s){return t.addOrUpdateHandle(e.roleId)}}},[s("i",{staticClass:"el-icon-edit"}),t._v("编辑")])],1)})),0)])],1),s("el-button",{staticClass:"btn-add-public",attrs:{plain:"",size:"mini",type:"primary"},on:{click:function(e){return t.addOrUpdateHandle()}}},[s("i",{staticClass:"el-icon-plus"}),t._v("新增")]),s("el-switch",{staticClass:"switch-position",attrs:{"active-text":"有效","inactive-text":"全部"},on:{change:t.showAll},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}})],1),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.showRightBox,expression:"!showRightBox"}],staticClass:"unselect-role-or-posts"},[t._v("请先选择左边岗位查看权限")]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showRightBox,expression:"showRightBox"}],staticClass:"main-box-right"},[s("div",{staticClass:"page-title"},[t._v(t._s(t.rightTopTip))]),s("vue-scroll",{attrs:{ops:t.scrollops}},[s("el-tabs",{on:{"tab-click":t.changeRightTabs},model:{value:t.activeRight,callback:function(e){t.activeRight=e},expression:"activeRight"}},[s("el-tab-pane",{attrs:{label:"角色选择",name:"menubtn"}},[s("div",{staticClass:"menubtn"},[s("el-form",{directives:[{name:"show",rawName:"v-show",value:0!==t.postsRoleList.length,expression:"postsRoleList.length !== 0"}],ref:"form",attrs:{model:t.form,"label-width":"80px"}},[s("div",{staticClass:"role-list-box"},t._l(t.postsRoleList,(function(e){return s("el-form-item",{key:e.name},[s("el-checkbox-group",{model:{value:t.postsRoleListSelected,callback:function(e){t.postsRoleListSelected=e},expression:"postsRoleListSelected"}},[s("el-checkbox",{key:e.authoarityId,attrs:{label:e.authorityId}},[t._v(t._s(e.name))])],1)],1)})),1),s("el-form-item",[s("el-button",{staticClass:"submit-role-posts",attrs:{type:"primary"},on:{click:t.handleClickRolePostSubmit},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleClickRolePostSubmit(e)}}},[t._v("保存")])],1)],1),s("span",{directives:[{name:"show",rawName:"v-show",value:0==t.postsRoleList.length,expression:"postsRoleList.length == 0"}],staticClass:"no-data-tip"},[t._v("暂无可选角色")])],1)]),s("el-tab-pane",{attrs:{label:"权限显示",name:"business"}},[s("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[s("el-tree",{attrs:{data:t.postsAuthList,"show-checkbox":"","default-expand-all":"","node-key":"value","default-expanded-keys":["1"],"default-checked-keys":t.authTreeDefaultChecked},on:{check:t.checkAuth}})],1)],1)],1)],1)],1),t.addOrUpdateVisible?s("add-or-update",{ref:"addOrUpdate",attrs:{roleId:t.roleId,allStatus:t.allStatus,platforms:t.platforms,editdept:t.addOredit},on:{whichPlatform:t.whichPlatform,refreshDataList:function(e){return t.getDataList()}}}):t._e()],1)},a=[],o=(s("8e6e"),s("ac6a"),s("cadf"),s("456d"),s("bd86")),r=s("5892"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{title:"edit"==t.editdept?"编辑岗位":"新增岗位","close-on-click-modal":!1,visible:t.visible,width:"30%"},on:{"update:visible":function(e){t.visible=e}}},[s("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"岗位分类：",prop:"platform"}},[s("el-select",{staticStyle:{width:"87%"},attrs:{filterable:"",disabled:"edit"===t.editdept,clearable:"",remote:"","reserve-keyword":"",placeholder:"请选择"},on:{change:t.changePosts},model:{value:t.dataForm.platform,callback:function(e){t.$set(t.dataForm,"platform",e)},expression:"dataForm.platform"}},t._l(t.postsList,(function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),s("el-form-item",{attrs:{label:"岗位名称：",prop:"name"}},[s("el-input",{staticStyle:{width:"87%"},attrs:{placeholder:"请输入",clearable:""},model:{value:t.dataForm.name,callback:function(e){t.$set(t.dataForm,"name",e)},expression:"dataForm.name"}})],1),s("el-form-item",{attrs:{label:"岗位状态：",size:"mini",prop:"status"}},[s("el-radio-group",{model:{value:t.dataForm.status,callback:function(e){t.$set(t.dataForm,"status",e)},expression:"dataForm.status"}},[s("el-radio",{attrs:{label:"0"}},[t._v("有效")]),s("el-radio",{attrs:{label:"1"}},[t._v("无效")])],1)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.dataFormSubmit()}}},[t._v("确定")])],1)],1)},n=[],c=(s("6b54"),s("2f62")),d=s("fa7d");function u(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function h(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?u(Object(s),!0).forEach((function(e){Object(o["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var p={props:["roleId","editdept","platforms","allStatus"],data:function(){return{postsList:[{id:1,name:"总部"},{id:2,name:"经销商"}],visible:!1,dataForm:{roleId:"",name:"",status:"0",platform:""},dataRule:{platform:[{required:!0,message:"岗位分类不能为空",trigger:"change"}],name:[{required:!0,message:"岗位名称不能为空",trigger:"change"}],status:[{required:!0,message:"部门状态不能为空",trigger:"change"}]}}},computed:{},mounted:function(){},methods:h({},Object(c["b"])({getpostsList:"getpostsList",getPostsAuthList:"getPostsAuthList"}),{changePosts:function(t){},init:function(t){var e=this;this.visible=!0,"edit"===this.editdept?Object(r["d"])({roleId:this.roleId}).then((function(s){if(200===s.code&&s.success){var i=s.data,a=Object(d["m"])(i,["roleId","platform","status","name"]);a.status=a.status.toString(),e.dataForm=h({},a)}else t.$refs["dataForm"].resetFields()})):t.$refs["dataForm"].resetFields()},dataFormSubmit:function(){var t=this;this.$refs["dataForm"].validate((function(e){var s=Object(d["e"])(t.dataForm);e&&("edit"===t.editdept?Object(r["b"])(s).then((function(){t.$message.success("编辑成功"),t.getpostsList({platform:t.dataForm.platform,status:!0===t.allStatus?0:""}),t.visible=!1})):(delete s.roleId,Object(r["a"])(s).then((function(e){200===e.code&&e.success?(t.$message.success("新增成功"),t.getpostsList({platform:t.dataForm.platform,status:!0===t.allStatus?0:""}),t.visible=!1):t.$message.error("新增失败")}))))})),this.$emit("whichPlatform",this.dataForm.platform)},hendleChangeCascader:function(){this.$refs["dataForm"]&&this.$refs["dataForm"].validateField("pid")}})},m=p,f=s("2877"),b=Object(f["a"])(m,l,n,!1,null,null,null),v=b.exports,g=s("47fd");function w(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function O(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?w(Object(s),!0).forEach((function(e){Object(o["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):w(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var k={components:{AddOrUpdate:v},data:function(){return{scrollops:g["a"],showRightBox:!1,activeFirst:["menu"],platforms:"",tabsIndex:"0",whichPlat:"",roleId:"",auth_checked:"",clickItem:"",showEditBtn:!0,isShow:!0,allStatus:!0,addOredit:"",activeLeft:"dept",activeRight:"menubtn",rightTopTip:"",showMenu:"menu",addOrUpdateVisible:!1,form:{type:[]},postsRoleListSelected:[],authTreeDefaultChecked:[]}},computed:{postsRoleList:function(){return this.$store.state.posts.postsRoleList},postsList:function(){return this.$store.state.posts.postsList},postsAuthList:function(){return this.$store.state.posts.postsAuthList}},watch:{postsRoleList:function(t){this.postsRoleListSelected=t.filter((function(t){return t.own})).map((function(t){return t.authorityId}))},postsAuthList:function(t){var e=[];this.recursionAuthTreeSelect(t,e),this.authTreeDefaultChecked=e}},mounted:function(){this.getpostsList({platform:1,status:0})},methods:O({},Object(c["b"])({getpostsList:"getpostsList",getPostsAuthList:"getPostsAuthList",getPostsRoleList:"getPostsRoleList"}),{checkAuth:function(t,e){this.auth_checked=e.checkedKeys.join()},changeLeftTabs:function(t){this.clickItem="",this.showRightBox=!1;var e=t.index;this.tabsIndex=e,this.platforms=t.label,this.isShow=!0,this.getpostsList({platform:"0"===e?1:2,status:0})},changeRightTabs:function(t,e){this.clickItem="";var s=t.index;this.tabsIndex=t.index,this.roleId?"1"===s?this.getPostsAuthList({roleId:this.roleId,platform:"0"===this.tabsIndex?1:2}):this.getPostsRoleList({roleId:this.roleId}):this.$message.info("请先选择岗位")},changePostsNode:function(t,e){this.roleId=e,this.clickItem=t,this.rightTopTip=t,this.activeRight="menubtn",this.showRightBox=!0,this.getPostsRoleList({roleId:e})},addOrUpdateHandle:function(t){var e=this;t?(this.addOredit="edit",this.roleId=t):this.addOredit="add",this.addOrUpdateVisible=!0,this.$nextTick((function(){e.$refs.addOrUpdate.init(e.$refs.addOrUpdate,t)}))},handleClickRolePostSubmit:function(){var t=this,e={roleId:this.roleId,ids:this.postsRoleListSelected.join()};e.ids?Object(r["f"])(e).then((function(e){200===e.code&&e.success?t.$message.success("设置权限成功"):t.$message.error(e.message||"设置权限失败")})):this.$message.info("请先勾选权限")},recursionAuthTreeSelect:function(t,e){for(var s=0,i=t.length;s<i;s++)t[s].children&&t[s].children instanceof Array?this.recursionAuthTreeSelect(t[s].children,e):t[s].own&&e.push(t[s].value)},showAll:function(t){this.allStatus=t,this.getpostsList({platform:"0"===this.tabsIndex?1:2,status:t?0:""})},whichPlatform:function(t){this.whichPlat=t,this.activeLeft=1===t?"dept":"distributor"}})},y=k,L=(s("c126"),Object(f["a"])(y,i,a,!1,null,"7fe1763c",null));e["default"]=L.exports}}]);