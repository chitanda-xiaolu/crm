(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d3cb5cf6"],{"1e7f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-box dis-flex-row"},[a("div",{staticClass:"map-box dis-flex-row"},[a("div",{staticClass:"map-box-left"},[a("div",{staticClass:"dis-flex-col margin-top-70"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"所在区域",prop:"code"}},[e.isArea?a("area-select",{ref:"areaSelect",attrs:{isselectAll:e.isselectAll}}):e._e()],1),a("el-form-item",{attrs:{label:"小区名称：",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},on:{blur:e.searchMap},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMap(t)}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"详细地址：",prop:"address"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),a("el-form-item",{attrs:{label:"小区状态：",prop:"status"}},[a("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-radio",{attrs:{label:"0"}},[e._v("有效")]),a("el-radio",{attrs:{label:"1"}},[e._v("无效")])],1)],1),a("el-form-item",{attrs:{label:"定位："}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"padding-left-0",attrs:{span:10}},[a("el-input",{attrs:{placeholder:"经度",disabled:!0},model:{value:e.form.lng,callback:function(t){e.$set(e.form,"lng",t)},expression:"form.lng"}})],1),a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{placeholder:"纬度",disabled:!0},model:{value:e.form.lat,callback:function(t){e.$set(e.form,"lat",t)},expression:"form.lat"}})],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-position"},on:{click:e.onSubmit}},[e._v("保存")]),a("el-button",{staticClass:"margin-left-30",on:{click:e.goBack}},[e._v("取消")])],1)],1)],1)]),a("div",{staticClass:"map-box-right"},[a("baidu-map",{ref:"baiduMap"})],1)])])},n=[],o=(a("8e6e"),a("ac6a"),a("cadf"),a("456d"),a("7f7f"),a("6b54"),a("96cf"),a("3b8d")),i=a("bd86"),s=a("1f87"),c=a("33c7"),u=a("fe2f"),l=a("2f62"),p=a("fa7d"),d=a("aaf7");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={data:function(){return{isselectAll:!0,form:{name:"",address:"",status:"0",lng:"",lat:"",code:""},rules:{code:[{required:!0,message:"请选择所在区域",trigger:"blur"}],name:[{required:!0,message:"请输入小区名称",trigger:"change"}],address:[{required:!0,message:"请输入详细地址",trigger:"change"}],status:[{require:!0,message:"请选择小区状态",trigger:"change"}]},estate:{},isArea:!1,id:"",times:0}},components:{AreaSelect:s["a"],BaiduMap:c["a"]},computed:m({},Object(l["d"])({appData:"app",estateData:"estate"})),watch:{"appData.codeList":{handler:function(e,t){this.setCode(e),this.searchMap()}},"estateData.position":{handler:function(e,t){!Object(p["i"])(e)&&e.location&&(this.estate=e,this.form.lng=e.location.lng,this.form.lat=e.location.lat,this.form.address="".concat(e.address))}},"estateData.map":{handler:function(e,t){this.setMapPosition()}}},mounted:function(){this.init()},methods:m({},Object(l["c"])({setCodeList:"SET_CODE_LIST",setAreaName:"SET_AREA_NAME",closeCurrentPage:"CLOSE_CURRENT_PAGE"}),{init:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.id=t.$router.history.current.params.id,e.next=4,Object(d["b"])(t.id).then(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.form.address=a.address,t.form.name=a.housingEstateName,t.form.status=a.status.toString(),t.form.lat=a.latitude,t.form.lng=a.longitude,t.setAreaName(a.countyName||a.cityName||a.provinceName),t.setCodeList([a.provinceCode,a.cityCode,a.countyCode]),t.isArea=!0,e.next=10,t.loadMap();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSubmit:function(){var e=this;this.code=this.appData.codeList,this.$refs["form"].validate((function(t){if(t){var a=e,r={id:a.id,housingEstateName:a.form.name,provinceCode:a.appData.codeList[0],cityCode:a.appData.codeList[1]||"",countyCode:a.appData.codeList[2]||"",address:a.form.address,longitude:a.form.lng,latitude:a.form.lat,status:a.form.status};Object(d["c"])(r).then((function(e){200===e.code&&e.success?a.$message.success("修改成功"):a.$message.error(e.message),a.setCodeList(),a.closeCurrentPage(a.$route.fullPath),a.$router.push({path:"/housingEstate"})}))}}))},loadMap:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.baiduMap.initMap({longitude:this.form.lng,latitude:this.form.lat,estateName:this.form.name});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),searchMap:function(){this.form.code&&this.form.name&&this.times?this.$refs.baiduMap.initMapFromName(this.form.name):this.times=1},setCode:function(e){this.form.code=e},setMapPosition:function(){var e=this,t=this.estateData.map,a=Object(u["b"])(this.estateData.position.name);t.addEventListener("click",(function(r){t.clearOverlays();var n=new BMap.Point(r.point.lng,r.point.lat);e.form.lng=r.point.lng,e.form.lat=r.point.lat,t.centerAndZoom(new BMap.Point(r.point.lng,r.point.lat),17);var o=new BMap.Marker(n);t.addOverlay(o),o.setLabel(a)}))},goBack:function(){this.closeCurrentPage(this.$route.fullPath),this.$router.push({path:"/housingEstate"})}})},b=h,g=(a("8de6"),a("2877")),O=Object(g["a"])(b,r,n,!1,null,"7ac05e3f",null);t["default"]=O.exports},"1f87":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-cascader",{ref:"areaCascader",attrs:{props:e.props,filterable:"",clearable:!0},on:{change:function(t){return e.handleChange(t)}},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})},n=[],o=(a("8e6e"),a("ac6a"),a("cadf"),a("456d"),a("bd86")),i=(a("7f7f"),a("5df3"),a("1c4c"),a("b562")),s=a("2f62");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var l={props:["isAdd","isselectAll","isOrder"],data:function(){var e=this;return{selectedOptions:[],props:{lazy:!0,checkStrictly:!e.isselectAll,lazyLoad:function(t,a){var r=t.level,n=r?{parentId:t.value}:"";Object(i["a"])(n).then((function(t){if(200===t.code&&t.success){var n=Array.from(t.data).map((function(t){return{value:t.id,label:t.name,leaf:e.isOrder?r>=1:r>=2}}));e.options=n,a(n)}else e.$message({message:t.message||"请求错误",type:"error",duration:3e3}),reject()}))}},options:[]}},mounted:function(){this.isAdd?this.selectedOptions=[]:this.selectedOptions=this.appData.codeList?this.appData.codeList:[]},computed:u({},Object(s["d"])({appData:"app"})),watch:{selectedOptions:function(e){this.$emit("change",e)}},methods:u({},Object(s["c"])({setCodeList:"SET_CODE_LIST",setAreaName:"SET_AREA_NAME"}),{handleChange:function(e){"/order"===this.$route.path&&(this.$parent.form.model.areaCode=e),"/housingEstate/add"===this.$route.path&&(this.$parent.form.model.code=e),this.$emit("change",e);var t=e.slice(-1)[0];if(t!==this.appData.codeList.slice(-1)[0]){this.setCodeList(e);for(var a=0;a<this.options.length;a++)if(this.options[a].value===t){this.setAreaName(this.options[a].label);break}}}})},p=l,d=(a("662e"),a("2877")),f=Object(d["a"])(p,r,n,!1,null,"29af5f57",null);t["a"]=f.exports},"33c7":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"bmap-container",attrs:{id:e.mapId}})},n=[],o=(a("8e6e"),a("ac6a"),a("cadf"),a("456d"),a("7f7f"),a("96cf"),a("3b8d")),i=a("bd86"),s=a("fe2f"),c=a("2f62"),u=a("fa7d");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={data:function(){return{loading:!1,mapId:"BMap-".concat(Date.now()).concat(Math.floor(1e3*Math.random())),longitude:"120.260409",latitude:"30.244508",estateName:"布兰莎总部"}},computed:p({},Object(c["d"])({appData:"app",estateData:"estate"})),watch:{"estateData.position":{handler:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Object(u["i"])(t)||!t.location){e.next=7;break}return r=t,this.longitude=r.location.lng,this.latitude=r.location.lat,this.estateName=r.name,e.next=7,this.initMap();case 7:this.loading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()}},methods:p({},Object(c["c"])({setMap:"SET_MAP",setLabel:"SET_LABEL"}),{},Object(c["b"])({getPositionForName:"getPositionForName"}),{initMap:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this,a.loading=!0,e.next=4,Object(s["a"])().then(Object(o["a"])(regeneratorRuntime.mark((function e(){var r,n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=new BMap.Map(a.mapId),n=new BMap.Point(t?t.longitude:a.longitude,t?t.latitude:a.latitude),e.next=4,r.centerAndZoom(new BMap.Point(t?t.longitude:a.longitude,t?t.latitude:a.latitude),17);case 4:return o=new BMap.Marker(n),e.next=7,r.addOverlay(o);case 7:return i=Object(s["b"])(t?t.estateName:a.estateName),o.setLabel(i),r.enableScrollWheelZoom(),r.enableInertialDragging(),a.loading=!1,e.next=14,a.setMap(r);case 14:return e.next=16,a.setLabel(i);case 16:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),initMapFromName:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getPositionForName({name:t,region:this.appData.areaName});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()})},f=d,m=a("2877"),h=Object(m["a"])(f,r,n,!1,null,null,null);t["a"]=h.exports},"3c05":function(e,t,a){},"662e":function(e,t,a){"use strict";var r=a("f975"),n=a.n(r);n.a},"8de6":function(e,t,a){"use strict";var r=a("3c05"),n=a.n(r);n.a},aaf7:function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return s}));var r=a("b775");function n(e){return Object(r["a"])({url:"/housingEstate/hq/page",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/housingEstate/hq/add",method:"post",params:e})}function i(e){return Object(r["a"])({url:"/housingEstate/hq/edit",method:"put",params:e})}function s(e){return Object(r["a"])({url:"/housingEstate/hq/".concat(e),method:"get"})}},b562:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return s}));var r=a("b775");function n(e){return Object(r["a"])({url:"/areaCode/list",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/upload/uploadFile",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/upload/deleteFile",method:"delete",params:e})}function s(e){return Object(r["a"])({url:"/dict/list",method:"get",params:e})}},f975:function(e,t,a){},fe2f:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return o}));var r=a("01ea");function n(){return new Promise((function(e,t){if("undefined"!==typeof BMap)return e(BMap),!0;window.onBMapCallback=function(){e(BMap)};var a=document.createElement("script");a.type="text/javascript",a.src="http://api.map.baidu.com/api?v=2.0&ak=".concat(r["a"].BAIDU_MAP_KEY,"&callback=onBMapCallback"),a.onerror=t,document.head.appendChild(a)}))}function o(e){var t=new BMap.Label(e,{offset:new BMap.Size(-30,-40)});return t.setStyle({color:"green",fontSize:"12px",paddingLeft:"15px",paddingRight:"15px",paddingTop:"8px",paddingBottom:"8px",lineHeight:"20px",borderColor:"",fontFamily:"微软雅黑"}),t}}}]);