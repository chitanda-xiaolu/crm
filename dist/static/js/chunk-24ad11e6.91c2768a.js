(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24ad11e6"],{"24b7":function(e,t,s){},"2f00":function(e,t,s){"use strict";var a=s("4b4c"),i=s.n(a);i.a},"47fd":function(e,t,s){"use strict";var a={scrollPanel:{scrollingX:!1},bar:{hoverStyle:!0,onlyShowBarOnScroll:!1,background:"#ccc",scrollingX:!1,initialScrollX:!1,size:"5px"},rail:{}};t["a"]=a},"4b4c":function(e,t,s){},9175:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main-box dis-flex-row"},[s("div",{staticClass:"main-box-right user-list"},[s("area-detail")],1)])},i=[],r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main-box dis-flex-row"},[s("div",{staticClass:"main-box-left dept-tree"},[s("div",{staticClass:"tree-container"},[s("div",{staticClass:"tree-top"},[s("div",{staticClass:"tree-title"},[e._v("区域配置")]),s("span",{staticClass:"bl-xs-btn el-button--primary is-plain margin-left-20 smin-btn",on:{click:e.createRegion}},[s("i",{staticClass:"el-icon-plus"}),e._v("新增")])]),s("vue-scroll",{staticClass:"filter-tree",attrs:{ops:e.scrollops}},[s("el-tree",{ref:"tree",attrs:{data:e.fields.fieldsTree,"node-key":"value","default-expanded-keys":["1"],"highlight-current":!0,"expand-on-click-node":!1},on:{"node-click":e.changeNode},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,i=t.data;return s("span",{staticClass:"custom-tree-node"},[s("span",{class:{grey:1==i.status}},[e._v(e._s(a.label))]),s("span",[e._v(e._s(i.userName?i.userName:""))])])}}])})],1),s("el-switch",{staticClass:"show-all",attrs:{"active-text":"有效","inactive-text":"全部"},on:{change:e.showAllandVaild},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}}),e.addOrUpdateVisible?s("AddFields",{ref:"addOrUpdate",attrs:{isShowStatus:e.isShow?"0":""}}):e._e()],1)]),s("div",{staticClass:"main-box-right user-list"},[s("div",{staticClass:"page-title"},[e._v(e._s(e.topTitle))]),s("div",{staticClass:"content-box"},[s("el-form",{ref:"dataForm",attrs:{"label-position":e.labelPosition,"label-width":"88px",model:e.dataForm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getDataList("dataForm")}}},[s("p",{directives:[{name:"show",rawName:"v-show",value:1!==e.levelId&&1!==e.level,expression:"levelId !== 1 && level !== 1"}]},[s("el-divider",{attrs:{"content-position":"left"}},[e._v("信息"),s("i",{staticClass:"el-icon-thumb thumb"})])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:1!==e.levelId,expression:"levelId !== 1"}]},[s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3==e.levelId,expression:" levelId == 3"}],staticClass:"content-top-item",attrs:{label:"上级区域：",prop:"parentId"}},[s("el-select",{staticStyle:{width:"87%"},attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"请选择"},on:{focus:e.getParentList,change:e.changeParentList},model:{value:e.dataForm.parentId,callback:function(t){e.$set(e.dataForm,"parentId",t)},expression:"dataForm.parentId"}},e._l(e.parentList,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.parentId}})})),1)],1)],1),s("el-col",{attrs:{xs:12,sm:12,md:10,lg:8,xl:6}},[s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1!==e.level,expression:"level !== 1"}],staticClass:"content-top-item",staticStyle:{width:"87%"},attrs:{label:"名称：",prop:"name"}},[s("el-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1)],1),s("el-col",{attrs:{xs:12,sm:12,md:10,lg:8,xl:6}},[s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1!==e.level,expression:"level !== 1"}],staticClass:"content-top-item",attrs:{label:"区域状态：",prop:"status"}},[s("el-radio",{attrs:{label:"0"},model:{value:e.dataForm.status,callback:function(t){e.$set(e.dataForm,"status",t)},expression:"dataForm.status"}},[e._v("有效")]),s("el-radio",{attrs:{label:"1"},model:{value:e.dataForm.status,callback:function(t){e.$set(e.dataForm,"status",t)},expression:"dataForm.status"}},[e._v("无效")])],1)],1)],1)],1),s("el-divider",{attrs:{"content-position":"left"}},[e._v("对应经销商 "+e._s(e.distributorNum||0)+" 家"),s("i",{staticClass:"el-icon-thumb thumb"})]),s("div",{directives:[{name:"show",rawName:"v-show",value:3!==e.levelId,expression:"levelId !== 3"}],staticClass:"distributor-list"},[e._l(e.showList,(function(t){return[s("span",{key:t.distributorId,staticStyle:{width:"351px"}},[e._v(e._s(t.name+"【"+t.areaName+"】"))])]})),s("div",{directives:[{name:"show",rawName:"v-show",value:e.areaList.length>3&&3!==e.levelId,expression:"areaList.length > 3 && levelId !== 3"}],staticClass:"show-more",on:{click:function(t){e.showAll=!e.showAll}}},[e._v(e._s(e.openOrclose))])],2),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3==e.levelId,expression:"levelId == 3"}],staticClass:"content-top-item",attrs:{prop:"distributor"}},[s("el-select",{staticStyle:{width:"70%"},attrs:{multiple:"",filterable:"",clearable:"","loading-text":"搜索中...","default-first-option":"",placeholder:"请选择"},model:{value:e.selectDistributors,callback:function(t){e.selectDistributors=t},expression:"selectDistributors"}},e._l(e.distributor.userList,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name+" 【"+e.areaName+"】",disabled:1===e.status,value:e.id}})})),1)],1),s("el-divider",{attrs:{"content-position":"left"}},[e._v("配置负责人"),s("i",{staticClass:"el-icon-thumb thumb"})]),s("el-form-item",{staticClass:"content-top-item",attrs:{prop:"mainId"}},[s("el-select",{staticStyle:{width:"25%"},attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"请输入选择"},on:{change:e.changeManager},model:{value:e.dataForm.mainId,callback:function(t){e.$set(e.dataForm,"mainId",t)},expression:"dataForm.mainId"}},e._l(e.deptUsrt.managerList,(function(e){return s("el-option",{key:e.userId,attrs:{label:e.name+" 【"+e.deptName+"】",disabled:1==e.status,value:e.userId}})})),1)],1),s("el-divider",{attrs:{"content-position":"left"}},[e._v("配置查看人"),s("i",{staticClass:"el-icon-thumb thumb"})]),s("el-form-item",{staticClass:"content-top-item",attrs:{prop:"selectusers"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"",clearable:"","loading-text":"搜索中...","default-first-option":"",placeholder:"请输入选择"},model:{value:e.selectUsers,callback:function(t){e.selectUsers=t},expression:"selectUsers"}},e._l(e.deptUsrt.nopageList,(function(e){return s("el-option",{key:e.userId,attrs:{label:e.name+" 【"+e.deptName+"】",disabled:1==e.status,value:e.userId}})})),1)],1)],1)],1),s("span",{staticClass:"dialog-footer",staticStyle:{"margin-top":"10px"},attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{"margin-left":"95px"},attrs:{type:"primary",icon:"el-icon-position"},on:{click:function(t){return e.saveSelectVal()}}},[e._v("保存")])],1)])])},l=[],o=(s("8e6e"),s("ac6a"),s("cadf"),s("456d"),s("7f7f"),s("6b54"),s("bd86")),n=s("47fd"),c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{title:"新增区域","close-on-click-modal":!1,visible:e.visible,"destroy-on-close":!0,width:"30%"},on:{"update:visible":function(t){e.visible=t}}},[s("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"上级区域：",prop:"parentId"}},[s("el-select",{staticStyle:{width:"87%"},attrs:{filterable:"",clearable:"",disabled:"edit"===e.editdept,remote:"","reserve-keyword":"",placeholder:"请选择"},on:{change:e.changePosts},model:{value:e.dataForm.parentId,callback:function(t){e.$set(e.dataForm,"parentId",t)},expression:"dataForm.parentId"}},e._l(e.parentList,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),s("el-form-item",{attrs:{label:"名称：",prop:"name"}},[s("el-input",{staticStyle:{width:"87%"},attrs:{clearable:"",placeholder:"请输入"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),s("el-form-item",{attrs:{label:"区域状态：",size:"mini",prop:"status"}},[s("el-radio-group",{model:{value:e.dataForm.status,callback:function(t){e.$set(e.dataForm,"status",t)},expression:"dataForm.status"}},[s("el-radio",{attrs:{label:"0"}},[e._v("有效")]),s("el-radio",{attrs:{label:"1"}},[e._v("无效")])],1)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("确定")])],1)],1)},d=[],u=s("a716"),p=s("2f62"),m=s("fa7d");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function h(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){Object(o["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var f={props:["editdept","platforms","allStatus"],data:function(){return{parentList:[],visible:!1,dataForm:{roleId:"",name:"",status:"0",parentId:""},dataRule:{name:[{required:!0,message:"名称不能为空",trigger:"change"}],status:[{required:!0,message:"区域状态不能为空",trigger:"change"}]}}},methods:h({},Object(p["b"])({getTree:"getTree"}),{changePosts:function(e){},init:function(e){var t=this;Object(u["f"])().then((function(e){200===e.code&&e.success&&(t.parentList=e.data)})),this.visible=!0,this.dataForm={name:"",status:"0"}},dataFormSubmit:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){var s=Object(m["e"])(e.dataForm);Object(u["b"])(s).then((function(){e.$message.success("新增成功"),e.getTree({status:"0"}),e.visible=!1}))}}))}})},v=f,g=s("2877"),w=Object(g["a"])(v,c,d,!1,null,null,null),O=w.exports,I=s("01ea");function y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function k(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?y(Object(s),!0).forEach((function(t){Object(o["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var x={components:{AddFields:O},data:function(){return{scrollops:n["a"],level:1,selectDistributors:[],selectUsers:[],showUser:!1,showDistrio:!1,isShow:!0,addOrUpdateVisible:!1,levelId:"",regionId:"",labelPosition:"right",parentList:[],showAll:!1,distributorNum:0,dataForm:{name:"",status:"0",responsible:"",mainId:"",parentId:"",distributor:"",selectusers:[]},topTitle:"",areaList:[]}},computed:k({},Object(p["d"])({deptUsrt:"deptUser",fields:"fields",distributor:"distributor"}),{showList:function(){if(this.showAll)return this.areaList;var e=[];if(this.areaList.length>3)for(var t=0;t<3;t++)e.push(this.areaList[t]);else e=this.areaList;return e},openOrclose:function(){return this.showAll?"收起":"展开全部"},treeStatus:function(){return this.isShow?"0":""}}),mounted:function(){this.getTree({status:this.treeStatus}),this.getManager({platform:I["a"].COMPANY_PLATFORM}),this.getParentList(),this.lookDetail({regionId:1}),this.handleClickcSelectUser(1)},methods:k({},Object(p["b"])({getManager:"getManager",getTree:"getTree",getDetail:"getDetail",setPagination:"SET_PAGINATION",getData:"getData",getDistributorList:"getDistributorList",getNopageData:"getNopageData"}),{},Object(p["c"])({setDialogStatus:"SET_DIALOGSTATUS"}),{getParentList:function(){var e=this;Object(u["f"])({regionId:this.regionId}).then((function(t){var s=t&&t.data;s.map((function(e){e.parentId=e.id})),e.parentList=s}))},changeParentList:function(e){this.dataForm.parentId=e},changeManager:function(e){this.dataForm.mainId=e},handleClickcSelectUser:function(e){this.getNopageData({regionId:e})},handleClickselectDistributor:function(e){this.getDistributorList({size:1e4,regionId:e})},saveSelectVal:function(){var e=this,t=Object(m["e"])(this.dataForm);t.userIds=t.selectusers&&t.selectusers.join(),delete t.selectusers;var s={};s=Object(m["k"])(t,{distributorIds:this.selectDistributors&&this.selectDistributors.join(),id:this.regionId||"1",userIds:this.selectUsers.join()});var a={regionId:this.regionId,distributorIds:this.selectDistributors&&this.selectDistributors.join()},i=this;3===this.levelId&&this.selectDistributors.length?Object(u["e"])(a).then((function(t){200===t.code&&t.success?Object(u["c"])(s).then((function(t){200===t.code&&t.success&&(e.$message.success("编辑成功"),e.getTree({status:i.treeStatus}))})):e.$confirm(t.message,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["c"])(s).then((function(t){200===t.code&&t.success&&(e.$message.success("编辑成功"),e.getTree({status:i.treeStatus}))}))})).catch((function(e){console.log(e)}))})):Object(u["c"])(s).then((function(t){200===t.code&&t.success&&(e.$message.success("编辑成功"),e.getTree({status:e.treeStatus}))}))},showAllandVaild:function(e){var t={status:e?0:""};this.getTree(t),this.$emit("isShow",this.isShow?"0":"")},lookDetail:function(e){var t=this;Object(u["a"])(e).then((function(e){if(200===e.code&&e.success){var s=[],a=[],i=e.data;t.level=i.level,t.distributorNum=i.distributorNum;var r=Object(m["m"])(i,["name","phone","mainId","parentId","allowLogin","status","deptId"]);r.status=r&&r.status.toString(),r.parentId=r&&r.parentId,t.areaList=i.listAreaName,t.selectDistributors=i.listAreaName,i.listUser&&i.listUser.map((function(e){s.push(e.userId)})),i.listAreaName&&i.listAreaName.map((function(e){a.push(e.distributorId)})),t.selectUsers=s,t.selectDistributors=a,t.topTitle=i.name,t.dataForm=k({},r)}}))},changeNode:function(e){this.lookDetail({regionId:e.value}),3===e.level&&this.handleClickcSelectUser(e.value),3===e.level&&this.handleClickselectDistributor(e.value),this.levelId=e.level,this.regionId=e.value,this.topTitle=e.label},createRegion:function(e){var t=this;this.addOrUpdateVisible=!0,this.$nextTick((function(){t.$refs.addOrUpdate.init(t.$refs.addOrUpdate,e)}))}})},S=x,j=(s("b8a3"),Object(g["a"])(S,r,l,!1,null,"2b85fade",null)),F=j.exports,_={components:{AreaDetail:F}},D=_,C=(s("2f00"),Object(g["a"])(D,a,i,!1,null,"14691ed1",null));t["default"]=C.exports},b8a3:function(e,t,s){"use strict";var a=s("24b7"),i=s.n(a);i.a}}]);