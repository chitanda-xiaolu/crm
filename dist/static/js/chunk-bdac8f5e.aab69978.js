(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bdac8f5e"],{"1f87":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-cascader",{ref:"areaCascader",attrs:{props:t.props,filterable:"",clearable:!0},on:{change:function(e){return t.handleChange(e)}},model:{value:t.selectedOptions,callback:function(e){t.selectedOptions=e},expression:"selectedOptions"}})},n=[],i=(a("8e6e"),a("ac6a"),a("cadf"),a("456d"),a("bd86")),s=(a("7f7f"),a("5df3"),a("1c4c"),a("b562")),o=a("2f62");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var u={props:["isAdd","isselectAll","isOrder"],data:function(){var t=this;return{selectedOptions:[],props:{lazy:!0,checkStrictly:!t.isselectAll,lazyLoad:function(e,a){var r=e.level,n=r?{parentId:e.value}:"";Object(s["a"])(n).then((function(e){if(200===e.code&&e.success){var n=Array.from(e.data).map((function(e){return{value:e.id,label:e.name,leaf:t.isOrder?r>=1:r>=2}}));t.options=n,a(n)}else t.$message({message:e.message||"请求错误",type:"error",duration:3e3}),reject()}))}},options:[]}},mounted:function(){this.isAdd?this.selectedOptions=[]:this.selectedOptions=this.appData.codeList?this.appData.codeList:[]},computed:l({},Object(o["d"])({appData:"app"})),watch:{selectedOptions:function(t){this.$emit("change",t)}},methods:l({},Object(o["c"])({setCodeList:"SET_CODE_LIST",setAreaName:"SET_AREA_NAME"}),{handleChange:function(t){"/order"===this.$route.path&&(this.$parent.form.model.areaCode=t),"/housingEstate/add"===this.$route.path&&(this.$parent.form.model.code=t),this.$emit("change",t);var e=t.slice(-1)[0];if(e!==this.appData.codeList.slice(-1)[0]){this.setCodeList(t);for(var a=0;a<this.options.length;a++)if(this.options[a].value===e){this.setAreaName(this.options[a].label);break}}}})},d=u,p=(a("662e"),a("2877")),f=Object(p["a"])(d,r,n,!1,null,"29af5f57",null);e["a"]=f.exports},"33c7":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"bmap-container",attrs:{id:t.mapId}})},n=[],i=(a("8e6e"),a("ac6a"),a("cadf"),a("456d"),a("7f7f"),a("96cf"),a("3b8d")),s=a("bd86"),o=a("fe2f"),c=a("2f62"),l=a("fa7d");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p={data:function(){return{loading:!1,mapId:"BMap-".concat(Date.now()).concat(Math.floor(1e3*Math.random())),longitude:"120.260409",latitude:"30.244508",estateName:"布兰莎总部"}},computed:d({},Object(c["d"])({appData:"app",estateData:"estate"})),watch:{"estateData.position":{handler:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object(l["i"])(e)||!e.location){t.next=7;break}return r=e,this.longitude=r.location.lng,this.latitude=r.location.lat,this.estateName=r.name,t.next=7,this.initMap();case 7:this.loading=!1;case 8:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}()}},methods:d({},Object(c["c"])({setMap:"SET_MAP",setLabel:"SET_LABEL"}),{},Object(c["b"])({getPositionForName:"getPositionForName"}),{initMap:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=this,a.loading=!0,t.next=4,Object(o["a"])().then(Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new BMap.Map(a.mapId),n=new BMap.Point(e?e.longitude:a.longitude,e?e.latitude:a.latitude),t.next=4,r.centerAndZoom(new BMap.Point(e?e.longitude:a.longitude,e?e.latitude:a.latitude),17);case 4:return i=new BMap.Marker(n),t.next=7,r.addOverlay(i);case 7:return s=Object(o["b"])(e?e.estateName:a.estateName),i.setLabel(s),r.enableScrollWheelZoom(),r.enableInertialDragging(),a.loading=!1,t.next=14,a.setMap(r);case 14:return t.next=16,a.setLabel(s);case 16:case"end":return t.stop()}}),t)}))));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),initMapFromName:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getPositionForName({name:e,region:this.appData.areaName});case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()})},f=p,m=a("2877"),h=Object(m["a"])(f,r,n,!1,null,null,null);e["a"]=h.exports},"47fd":function(t,e,a){"use strict";var r={scrollPanel:{scrollingX:!1},bar:{hoverStyle:!0,onlyShowBarOnScroll:!1,background:"#ccc",scrollingX:!1,initialScrollX:!1,size:"5px"},rail:{}};e["a"]=r},5205:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-box dis-flex-col"},[a("el-form",{ref:"dataForm",attrs:{"label-position":"right","label-width":"120px",model:t.dataForm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getQuery()}}},[a("div",{staticClass:"search-box"},[a("el-form-item",{attrs:{label:"小区名称:",prop:"name"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:t.dataForm.name,callback:function(e){t.$set(t.dataForm,"name",e)},expression:"dataForm.name"}})],1),a("el-form-item",{attrs:{label:"所在区域:",prop:"code"}},[t.isArea?a("area-select"):t._e()],1),a("el-form-item",{attrs:{label:"小区状态:",prop:"status"}},[a("el-radio",{attrs:{label:"0"},model:{value:t.dataForm.status,callback:function(e){t.$set(t.dataForm,"status",e)},expression:"dataForm.status"}},[t._v("有效")]),a("el-radio",{attrs:{label:"1"},model:{value:t.dataForm.status,callback:function(e){t.$set(t.dataForm,"status",e)},expression:"dataForm.status"}},[t._v("无效")]),a("el-radio",{attrs:{label:""},model:{value:t.dataForm.status,callback:function(e){t.$set(t.dataForm,"status",e)},expression:"dataForm.status"}},[t._v("全部")])],1),a("el-form-item",{staticClass:"search-btns"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getQuery()}}},[t._v("查询")]),a("el-button",{on:{click:function(e){return t.resetForm()}}},[t._v("重置")])],1)],1)]),a("div",{staticClass:"map-box dis-flex-row border-top"},[a("div",{staticClass:"map-box-left"},[a("div",{staticClass:"dis-flex-col"},[a("div",{staticClass:"border-bottom",attrs:{span:24}},[t.hasPermission(t.Permission.estate.create.code)?a("router-link",{attrs:{to:"/housingEstate/add"}},[a("el-button",{staticClass:"map-add",attrs:{size:"mini",type:"primary",icon:"el-icon-plus",plain:""}},[t._v("新增小区")])],1):t._e()],1),a("vue-scroll",{attrs:{ops:t.scrollops}},[a("div",{ref:"wrapper",staticClass:"wrapper"},[t.estateList&&t.estateList.length?a("ul",{staticClass:"estate-list-conainer"},t._l(t.estateList,(function(e,r){return a("li",{key:e.id,staticClass:"list-item border-bottom",class:e.id===t.selectId?"active":""},[a("div",{staticClass:"list-item-left padding-col-10",class:1===e.status?"disabled-text":"",on:{click:function(a){return t.selectItem(e.id,e.housingEstateName,e.longitude,e.latitude)}}},[a("p",{staticClass:"item-left-top text-ellipsis"},[t._v(t._s(10*(t.current-1)+r+1)+". "+t._s(e.housingEstateName))]),a("p",{staticClass:"item-left-bottom text-ellipsis"},[t._v(t._s(e.fullName))])]),t.hasPermission(t.Permission.estate.update.code)?a("router-link",{attrs:{to:{path:"/housingEstate/edit/"+e.id}}},[a("el-button",{staticClass:"list-item-right",attrs:{type:"warning",size:"mini",icon:"el-icon-edit",plain:""}},[t._v("编辑")])],1):t._e()],1)})),0):t._e(),t.estateList&&!t.estateList.length?a("div",{staticClass:"el-table__empty-text empty-text"},[t._v("暂无数据")]):t._e()])]),a("el-pagination",{staticClass:"pagination-position",attrs:{"current-page":t.current,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.currentChangeHandle}})],1)]),a("div",{staticClass:"map-box-right"},[a("baidu-map",{ref:"baiduMap"})],1)])],1)},n=[],i=(a("8e6e"),a("ac6a"),a("cadf"),a("456d"),a("7f7f"),a("bd86")),s=a("33c7"),o=a("aaf7"),c=a("1f87"),l=a("2f62"),u=a("47fd");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var f={name:"estate",components:{AreaSelect:c["a"],BaiduMap:s["a"]},data:function(){return{scrollops:u["a"],loading:!1,dataForm:{name:"",code:"",status:"0"},selectId:1,estateList:[],total:0,mapId:"BMap-".concat(Date.now()).concat(Math.floor(1e3*Math.random())),longitude:"120.219",latitude:"30.259",estateName:"布兰莎总部",current:1,isArea:!1,timer:null}},computed:p({},Object(l["d"])({appData:"app"})),mounted:function(){var t={current:this.current,status:this.dataForm.status};this.estateData(t),this.setCodeList()},methods:p({},Object(l["c"])({setCodeList:"SET_CODE_LIST"}),{estateData:function(t){var e=this;e.loading=!0,Object(o["d"])(t).then((function(t){var a=t.data;200===t.code&&t.success&&t.data.total?(e.estateList=a.records,e.total=a.total,e.selectId=a.records[0].id,e.longitude=a.records[0].longitude,e.latitude=a.records[0].latitude,e.estateName=a.records[0].housingEstateName,e.$nextTick((function(){e._initScroll()}))):200===t.code&&t.success&&!t.data.total?(e.estateList=a.records,e.total=a.total):e.$message({message:t.message||"请求错误",type:"error",duration:3e3}),e.isArea=!0,e.loadMap()}))},_initScroll:function(){if(!this.$refs.wrapper)return 0},selectItem:function(t,e,a,r){this.selectId=t,this.estateName=e,this.longitude=a,this.latitude=r,this.loadMap()},loadMap:function(){this.$refs.baiduMap.initMap({longitude:this.longitude,latitude:this.latitude,estateName:this.estateName})},currentChangeHandle:function(t){this.current=t,this.getDataList()},getQuery:function(){this.current=1,this.getDataList()},getDataList:function(){var t={housingEstateName:this.dataForm.name,code:this.appData.codeList.slice(-1)[0]||"",status:this.dataForm.status,current:this.current};this.estateData(t)},resetForm:function(){var t=this;t.isArea=!1,t.setCodeList(),t.$refs["dataForm"].resetFields(),t.timer&&clearTimeout(t.timer),t.timer=setTimeout((function(){t.isArea=!0,clearTimeout(t.timer)}),10)}})},m=f,h=(a("b7a8"),a("2877")),b=Object(h["a"])(m,r,n,!1,null,"0e8104ea",null);e["default"]=b.exports},"662e":function(t,e,a){"use strict";var r=a("f975"),n=a.n(r);n.a},aaf7:function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"b",(function(){return o}));var r=a("b775");function n(t){return Object(r["a"])({url:"/housingEstate/hq/page",method:"get",params:t})}function i(t){return Object(r["a"])({url:"/housingEstate/hq/add",method:"post",params:t})}function s(t){return Object(r["a"])({url:"/housingEstate/hq/edit",method:"put",params:t})}function o(t){return Object(r["a"])({url:"/housingEstate/hq/".concat(t),method:"get"})}},b562:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"d",(function(){return i})),a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return o}));var r=a("b775");function n(t){return Object(r["a"])({url:"/areaCode/list",method:"get",params:t})}function i(t){return Object(r["a"])({url:"/upload/uploadFile",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/upload/deleteFile",method:"delete",params:t})}function o(t){return Object(r["a"])({url:"/dict/list",method:"get",params:t})}},b7a8:function(t,e,a){"use strict";var r=a("c79f"),n=a.n(r);n.a},c79f:function(t,e,a){},f975:function(t,e,a){},fe2f:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}));var r=a("01ea");function n(){return new Promise((function(t,e){if("undefined"!==typeof BMap)return t(BMap),!0;window.onBMapCallback=function(){t(BMap)};var a=document.createElement("script");a.type="text/javascript",a.src="http://api.map.baidu.com/api?v=2.0&ak=".concat(r["a"].BAIDU_MAP_KEY,"&callback=onBMapCallback"),a.onerror=e,document.head.appendChild(a)}))}function i(t){var e=new BMap.Label(t,{offset:new BMap.Size(-30,-40)});return e.setStyle({color:"green",fontSize:"12px",paddingLeft:"15px",paddingRight:"15px",paddingTop:"8px",paddingBottom:"8px",lineHeight:"20px",borderColor:"",fontFamily:"微软雅黑"}),e}}}]);