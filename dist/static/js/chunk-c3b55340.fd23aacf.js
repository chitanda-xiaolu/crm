(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c3b55340"],{"61f7":function(e,t,s){"use strict";s.d(t,"f",(function(){return o})),s.d(t,"d",(function(){return i})),s.d(t,"e",(function(){return n})),s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return l}));s("a481");function o(e,t,s){/^[0-9]{11}$/.test(t)?s():s(new Error("请输入正确的手机号"))}function i(e,t,s){/^([1-9]\d*|0)(\.\d*[0-9])?$/.test(t)?s():s(new Error("请输入正数"))}function n(e,t,s){parseFloat(t)>0?s():s(new Error("请输入正数"))}function r(e){var t={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"',"#40":"(","#41":")"};return e&&e.replace(/&(lt|gt|nbsp|amp|quot|#40|#41);/gi,(function(e,s){return t[s]}))}function a(e){var t=new Date(e),s=t.getFullYear()+"-",o=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",i=t.getDate()<10?"0"+t.getDate():t.getDate(),n=s+o+i;return n}function l(e){var t=e.substring(0,19);t=t.replace(/-/g,"/");var s=new Date(t).getTime();return s}},"993d":function(e,t,s){},ae78:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-wrap"},[s("div",{staticClass:"zhazhao"},[s("div",{staticClass:"ms-login"},[s("div",{staticClass:"ms-title"},[e._v(e._s(e.login_title))]),s("el-form",{directives:[{name:"show",rawName:"v-show",value:e.isnormalLogin,expression:"isnormalLogin"}],ref:"loginForm",staticClass:"ms-content",attrs:{model:e.loginForm,rules:e.normalRules,"label-width":"0px"}},[s("el-form-item",{attrs:{prop:"mobile"}},[s("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.loginForm.mobile,callback:function(t){e.$set(e.loginForm,"mobile",t)},expression:"loginForm.mobile"}},[s("i",{staticClass:"iconfont icon-shouji2 icon-css",attrs:{slot:"prefix"},slot:"prefix"})])],1),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入密码","show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("loginForm")}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[s("i",{staticClass:"iconfont icon-mima2 icon-css",attrs:{slot:"prefix"},slot:"prefix"})])],1),s("div",{staticClass:"login-btn"},[s("el-button",{attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){return t.preventDefault(),e.submitForm("loginForm")}}},[e._v("登录")])],1),s("p",{staticClass:"login-tips"},[s("el-checkbox",{on:{change:e.remberMe},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住登录状态")]),s("span",{staticClass:"cuosor-pointer",on:{click:e.forgetPsw}},[e._v("忘记密码？")])],1)],1),s("el-form",{directives:[{name:"show",rawName:"v-show",value:e.isPhoneCode,expression:"isPhoneCode"}],ref:"validCode",staticClass:"ms-content",attrs:{model:e.validCode,rules:e.validCodeRules,"label-width":"0px"}},[s("el-form-item",{attrs:{prop:"fmobile"}},[s("el-input",{attrs:{placeholder:"请输入手机号码"},on:{blur:e.validedPhone},model:{value:e.validCode.fmobile,callback:function(t){e.$set(e.validCode,"fmobile",t)},expression:"validCode.fmobile"}},[s("i",{staticClass:"iconfont icon-shouji2 icon-css",attrs:{slot:"prefix"},slot:"prefix"})])],1),s("el-form-item",{attrs:{prop:"code"}},[s("el-input",{attrs:{placeholder:"请输入验证码"},model:{value:e.validCode.code,callback:function(t){e.$set(e.validCode,"code",t)},expression:"validCode.code"}},[s("i",{staticClass:"iconfont icon-duanxin icon-css",staticStyle:{"line-height":"-1px"},attrs:{slot:"prefix"},slot:"prefix"}),s("el-button",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"code-btn cuosor-pointer",attrs:{slot:"prefix"},on:{click:e.getValidCode},slot:"prefix"},[e._v("获取验证码")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"code-btn code-btn-second",attrs:{slot:"prefix"},slot:"prefix"},[e._v(e._s(e.count)+"秒后重试")])],1)],1),s("div",{staticClass:"login-btn"},[s("el-button",{attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){return t.preventDefault(),e.submitForm("validCode")}}},[e._v("下一步")]),s("p",{staticClass:"login-tips"},[s("el-checkbox",{staticStyle:{visibility:"hidden"}}),s("span",{staticClass:"return-login cuosor-pointer",on:{click:e.returnLogin}},[e._v("\n                            返回登录\n                        ")])],1)],1)],1),s("el-form",{directives:[{name:"show",rawName:"v-show",value:e.isNewPsw,expression:"isNewPsw"}],ref:"setNewPsw",staticClass:"ms-content",attrs:{model:e.setNewPsw,rules:e.finddPswRules,"label-width":"0px"}},[s("el-form-item",{attrs:{prop:"fPassword"}},[s("el-input",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:e.setNewPsw.fPassword,callback:function(t){e.$set(e.setNewPsw,"fPassword",t)},expression:"setNewPsw.fPassword"}},[s("i",{staticClass:"iconfont icon-mima2 icon-css",attrs:{slot:"prefix"},slot:"prefix"})])],1),s("el-form-item",{attrs:{prop:"repassword"}},[s("el-input",{attrs:{type:"password",placeholder:"请再次输入密码"},model:{value:e.setNewPsw.repassword,callback:function(t){e.$set(e.setNewPsw,"repassword",t)},expression:"setNewPsw.repassword"}},[s("i",{staticClass:"iconfont icon-mima2 icon-css",attrs:{slot:"prefix"},slot:"prefix"})])],1),s("div",{staticClass:"login-btn"},[s("el-button",{attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){return t.preventDefault(),e.submitForm("setNewPsw")}}},[e._v("确定")])],1)],1),s("div",{staticClass:"order"},[s("span",{staticClass:"line"}),s("span",{staticClass:"txt",on:{click:e.getQrcode}},[s("i",{staticClass:"iconfont icon-dingding"}),e._v("钉钉登录")]),s("span",{staticClass:"line"})])],1)])])},i=[],n=(s("8e6e"),s("ac6a"),s("cadf"),s("456d"),s("a481"),s("bd86")),r=s("34aa"),a=s("2f62"),l=s("61f7");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var u={data:function(){var e=this,t=function(t,s,o){""===s?o(new Error("请输入密码")):(""!==e.setNewPsw.repassword&&e.$refs.ruleForm&&e.$refs.ruleForm.validateField("checkPass"),o())},s=function(t,s,o){""===s?o(new Error("请再次输入密码")):s!==e.setNewPsw.fPassword?o(new Error("两次输入密码不一致!")):o()};return{rember:!0,show:!0,count:"",timer:null,login_title:"手机登录",code:"",passPhone:!1,isPhoneCode:!1,isNewPsw:!1,isnormalLogin:!0,checked:!0,loginForm:{mobile:"",password:""},validCode:{fmobile:"",code:""},setNewPsw:{fPassword:"",repassword:""},finddPswRules:{fPassword:[{validator:t,trigger:"change"}],repassword:[{validator:s,trigger:"change"}]},normalRules:{mobile:[{validator:l["f"],trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"change"}]},validCodeRules:{fmobile:[{validator:l["f"],trigger:"change"}],code:[{required:!0,message:"请输入验证码",trigger:"change"}]},loading:!1,ddLink:""}},computed:d({},Object(a["d"])({jump_code:"user"})),mounted:function(){this.setTags()},methods:d({},Object(a["c"])({setTags:"SET_TAGSLIST"}),{},Object(a["b"])({dindinLogin:"dindinLogin"}),{forgetPsw:function(){this.isPhoneCode=!0,this.isnormalLogin=!1,this.login_title="忘记密码"},validedPhone:function(){var e=this,t=this.validCode.fmobile,s=this;/^[0-9]{11}$/.test(this.validCode.fmobile)&&Object(r["g"])(t).then((function(t){200===t.code&&t.success?e.passPhone=!0:s.$message.error("请求错误")}))},getValidCode:function(){var e=60;if(this.validCode.fmobile){var t={phone:this.validCode.fmobile},s=this;Object(r["m"])(t).then((function(t){s.timer&&clearInterval(s.timer),200===t.code&&t.success?s.timer||(s.count=e,s.show=!1,s.timer=setInterval((function(){s.count>0&&s.count<=e?s.count--:(s.show=!0,clearInterval(s.timer),s.timer=null)}),1e3)):s.$message.error("请求错误")}))}else this.$message({message:"请先填写手机号",type:"warning"})},returnLogin:function(){this.isPhoneCode=!1,this.isnormalLogin=!0,this.login_title="手机登录"},submitForm:function(e){var t=this;switch(e){case"loginForm":t.$refs[e].validate((function(e){e&&(t.loading=!0,t.$store.dispatch("Login",t.loginForm).then((function(){t.loading=!1,t.$router.replace({path:"/"})})).catch((function(){t.loading=!1})))}));break;case"validCode":t.$refs[e].validate((function(e){var s={phone:t.validCode.fmobile,validateCode:t.validCode.code};if(!e)return!1;t.timer&&clearInterval(t.timer),Object(r["h"])(s).then((function(e){200===e.code&&e.success?(t.login_title="设置新密码",t.isPhoneCode=!1,t.isnormalLogin=!1,t.isNewPsw=!0):t.$message.error("请求错误")}))}));break;case"setNewPsw":t.$refs[e].validate((function(e){var s={phone:t.validCode.fmobile,newPassword:t.setNewPsw.fPassword,confirmNewPassword:t.setNewPsw.repassword};e&&t.$store.dispatch("ResetPassword",s).then((function(){t.$router.replace({path:"/"}),t.$message.success("密码设置成功")}))}));break}},getQrcode:function(){this.dindinLogin()},remberMe:function(e){this.rember=e}})},p=u,f=(s("bb00"),s("2877")),m=Object(f["a"])(p,o,i,!1,null,"e47c9ba4",null);t["default"]=m.exports},bb00:function(e,t,s){"use strict";var o=s("993d"),i=s.n(o);i.a}}]);